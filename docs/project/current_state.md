# Текущее состояние

Документ фиксирует, что реализовано на данный момент и какие области находятся в разработке.

## Реализовано

### Публичные страницы и навигация
- Главная страница с базовым контентом.
- Раздел площадок (`/venues`) с внутренним меню типов и страницами типов (`/venues/<type>`).
- Создание площадок через модальное окно на `/venues` с переходом на страницу площадки.
- Навигация в хедере (пункты разделов).
- Раздел Admin (`/admin`) с доступом по уровню роли и внутренним меню.
- Страница Admin «Модерация пользователей» с фильтрами, сортировкой, пагинацией и действиями подтверждения/отклонения.
- Страница Admin «Модерация площадок» с фильтрами, сортировкой, пагинацией и действиями подтверждения/отклонения.
- В Admin добавлены действия блокировки/разблокировки пользователей с указанием причины.
- Добавлена страница расписания площадки и пункт «Расписание» в меню площадки, включая календарь исключений.
- Добавлены базовые сущности домена Events и справочник типов событий (game/training/game_training).
- Добавлены страницы событий и бронирования площадок через событие.
- Бронирования событий создаются со статусом pending (подтверждение — отдельный шаг).
- Добавлено удаление событий (создатель события или админ).

### Данные и сущности
- Пользователь (`User`) с логином и статусом подтверждения.
- Профиль пользователя (`UserProfile`) с персональными данными.
- Контакты пользователя (`UserContact`) с типом и подтверждением.
- Роли участника процесса (`ParticipantRole`) и назначения (`ParticipantRoleAssignment`).
- Площадки (`Venue`) с доступностью (`is_available`, `closure_reason`) и типы площадок (`VenueType`) с человекочитаемыми alias.

### Аккаунт и участники
- Страница аккаунта с боковым внутренним меню разделов.
- Вкладки/разделы по подтвержденным ролям участника процесса.
- Профиль пользователя (UserProfile).
- Редактирование профиля и пароля с ограничениями по статусу подтверждения.
- Модерация пользователя: заявка на подтверждение с проверкой требований и статусом (pending/approved/rejected).
- Статус пользователя "blocked" с причиной блокировки, отображаемой в аккаунте.

### Контакты пользователя
- Единая сущность контактов `UserContact` с типом (email/phone/telegram/vk/other).
- Управление контактами: добавление, редактирование неподтвержденных, удаление неподтвержденных.
- Подтверждение контактов через одноразовый код с TTL и лимитом попыток.
- UI‑состояния: запрос кода, ввод кода, ошибки/успех, ожидание повторного запроса.

### Ограничения и валидации
- У пользователя не может быть двух одинаковых контактов одного типа.
- Подтвержденные контакты нельзя редактировать и удалять.
- Контакт подтверждается кодом с TTL; количество попыток ограничено.
- Пароль при регистрации: минимум 6 символов, буквы и цифры.
- Добавлено глобальное право `venue.booking` (бронирование площадки).

### Регистрация и авторизация
- Регистрация с обязательным `login` и паролем; email опционален.
- Авторизация по `login` и паролю.

### UX и интерфейс
- Формы в модальном окне блокируются на время запроса.
- Валидационные ошибки отображаются рядом с полями.
- Единый логотип используется в хедере и футере.
- Основной контент страниц размещен в `main`. (Задача: `docs/tasks/047`)
- На внутренних страницах добавлены breadcrumbs. (Задача: `docs/tasks/048`)
- Попапы унифицированы: header, scrollable content (500px) и footer с кнопками. (Задача: `docs/tasks/049`)

## В работе / запланировано
- Игры, тренировки, турниры и связанные сценарии.
- Расширенные каталоги и поиск.
- Реальные интеграции отправки кода подтверждения (email/telegram/phone).
- Проектирование домена Events (Event, EventType, Tournament) и бронирований через событие. (Задача: `docs/tasks/053`)
