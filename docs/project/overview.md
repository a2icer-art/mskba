## Project overview (контекст проекта)
- [Архитектура](architecture.md)
- [Процессы](processes.md)
- [Бизнес‑сценарии](business_scenarios.md)
- [Текущее состояние](current_state.md)

**MSKBA** — это баскетбольный цифровой портал и сервис для организации игр, тренировок и взаимодействия участников баскетбольного сообщества.

### Цель проекта
Создать единую платформу, которая соединяет всех, кто связан с баскетболом, и сокращает путь от запроса до результата.

### Основные пользователи
- **Игроки** — ищут игры, площадки, команды и сообщества.
- **Организаторы/администраторы** — управляют играми, тренировками и мероприятиями.
- **Профессионалы и участники сообщества** — публикуют и ищут предложения и услуги по тематике баскетбола.

### Ключевые задачи
- Поиск и фильтрация площадок, игр и мероприятий.
- Создание и управление играми и тренировками.
- Встроенная регистрация и авторизация для участников.
- Подтверждение пользователей через модерацию.

### Авторизация
- Вход в систему выполняется по полю `login` и паролю.
- Поле `login` хранится в таблице `users` и используется как основной идентификатор.

### Редактирование пользователей
- Редактирование профиля и пароля выполняется в аккаунте с ограничениями по статусу подтверждения; детали описаны в бизнес-процессах: [Процессы](processes.md).

### Модерация пользователей
- Пользователь отправляет заявку на подтверждение из аккаунта после выполнения требований.
- Модерация происходит в Admin через список заявок с решениями «подтвердить/отклонить».

### Редактирование площадок
- Редактировать площадку может только создатель.
- После подтверждения доступны только необязательные поля (единый источник требований используется и для модерации, и для редактирования).

### Модерация площадок
- Заявки на площадки обрабатываются в Admin, доступны фильтры и решения «подтвердить/отклонить/заблокировать».

### Обновления и изменения
- Адреса площадок вынесены в отдельную сущность `Address` с полями: `city`, `street`, `building`, `str_address`; поле `district` исключено из модели и БД.
- На формах создания/редактирования площадок обновлены поля адреса и валидация; в интерфейсе отображается единая строка адреса из города, улицы и дома.
- В модальных окнах редактирования площадок и профиля пользователя сверху показывается блок с подтвержденной/модерируемой информацией, ниже - только доступные для редактирования поля.
- Для профиля пользователя добавлено серверное форматирование: дата рождения отображается как `DD-MM-YYYY`, пол - на русском языке.
- В попапах добавлены крестик закрытия и закрытие кликом по фону; кнопки сохранения унифицированы.
- Добавлена доменная сущность `Metro`, сидер станций использует открытый источник hh.ru (актуально на 2025 год); связь метро теперь хранится на адресах площадок.
- Добавлена доменная сущность `City` и сидер городов Москвы и Московской области (используется для фильтрации адресных подсказок).
- Добавлен доменный модуль интеграций и подсказки адреса через Yandex (suggest + geocode) с фильтрацией по стране (ADDRESS_DEFAULT_COUNTRY) и городам из таблицы `cities`.
- Формы создания/редактирования площадок используют единое поле адреса с подсказками; при статусах moderation/confirmed ввод адреса скрыт, доступно поле `venue.str_address`.
### Логи (Admin)
- Для пользователей с level > 20 доступен раздел «Логи» в Admin.
- В разделе доступна выборка логов по сущностям, а также просмотр «всех логов» с деталями записи.
