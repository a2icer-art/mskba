## Правила аудита и удаления

- Для доменных сущностей по умолчанию используем `SoftDeletes` (поле `deleted_at`).
- Поле `is_deleted` не добавляем, если нет особой причины — источником истины является `deleted_at`.
- При необходимости фиксировать автора удаления добавляем `deleted_by` (fk -> users).
- Для аудита добавляем `created_by` и `updated_by` (fk -> users) и стандартные `created_at`/`updated_at`.
- Если для конкретной сущности правило не применяется — это фиксируется явно в описании задачи.

## Правила alias/slug

- Если сущность использует `alias`, то он формируется как SEF/ЧПУ от `name` (slug).
- Формат slug: нижний регистр, латиница, разделитель `-` (если нет особых требований).

## Доменные QueryBuilder-ы

- Для сущностей с правилами видимости используем доменные QueryBuilder-ы или локальные scope в модели.
- Любые выборки таких сущностей (списки и просмотр по id/alias) должны проходить через эти правила.
- В сервисах и контроллерах не дублируем условия видимости вручную.
- Если логика видимости зависит от роли, вычисление роли выполняется внутри QueryBuilder-а, чтобы контроллеры оставались тонкими.

## UI: предиктивные поля

- Поля с предиктивным вводом помечаем классом `.input-predictive`.
- Во время загрузки подсказок у поля обязателен preloader (gif) внутри инпута справа.

## UI: системные уведомления

- Для результатов серверных операций используем `SystemNoticeStack`.
- Уведомления отображаются справа вверху, с отступом 15px от нижней границы шапки.
- Уведомления автоматически скрываются через 5 секунд, доступны ручному закрытию.

## Таймзона

- Проект работает в таймзоне UTC+3 (Europe/Moscow).
- Все серверные даты/времена должны интерпретироваться и сохраняться с учетом этой таймзоны.

## Временные значения

- Все временные значения в БД храним в минутах.
- Для UI допускается ввод в минутах или часах.
- Если в запросе передан флаг `*_is_minutes = true`, значение считается в минутах.
- Если флаг не передан или равен `false`, значение считается в часах и на бэке конвертируется в минуты.

## Роли участников процесса

- Роли участников процесса отделены от ролей доступа (admin/moderator/editor).
- Домен: Participants с сущностями ParticipantRole и ParticipantRoleAssignment.
- Назначения могут быть глобальными (без контекста) или контекстными через polymorphic context_type/context_id.
- Справочник ролей и назначения используют alias/slug, status, auditing, SoftDeletes.
