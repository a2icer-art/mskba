# task_name
Адреса: предиктивный ввод через Yandex API и интеграционный слой

# task_status
[x]

# task_init_description
давай теперь сделаем новую задачу - ввод адреса для сущностей (в целом) и в данном случае для "площадка" - должен происходить при помощи API Yandex ("https://api-maps.yandex.ru/2.1/?lang=ru_RU&apikey=API_KEY") - не должно быть явно отображаемых полей для атрибутов адреса - город, метро, улица, дом - должно быть одно поле для предикативного ввода адреса, которое при вводе значение должно через наш backend слой для интеграций (который также нужно будет создать) будет возвращать варианты списком, основанные на структурах от yandex и на основании них под полем для ввода должен появляться список, нажав один из вариантов в списке - данные подставляюся в hidden поля город, метро (тут тоже надо совместить с нашей моделью Metro - найти по названию и вернуть id - если будет предложено несколько метро используем первый вариант, который есть у нас в бд если вариантов нет, то ничего не проставляем в соответствующие hidden поле), улица и дом

# task_short_description
Адреса: предиктивный ввод через Yandex API, интеграционный слой и маппинг к Metro.

# task_full_description
Сделать универсальный интеграционный слой (app/Domain/Integrations) и подключить Yandex API для подсказок адреса. Для площадок заменить явные поля адреса на одно поле предиктивного ввода. Под полем показывать список вариантов. При выборе варианта: заполнить hidden-поля city, street, building и metro_id. Metro подбирать по названию из подсказок (первое совпадение в БД), если нет совпадений - оставить пустым.

# План выполнения задачи
1. Спроектировать интеграционный слой и контракт для подсказок адреса. (docs/tasks/042/subtasks/step-001.md)
2. Реализовать Yandex-провайдер и эндпоинт подсказок адреса. (docs/tasks/042/subtasks/step-002.md)
3. Обновить UX площадок: единое поле адреса, список подсказок и hidden поля. (docs/tasks/042/subtasks/step-003.md)

# Итоги реализации
- Добавлен доменный модуль интеграций: контракт, DTO, сервис, провайдер Yandex и контроллер подсказок.
- Реализованы подсказки адреса через suggest + geocode (с корректной обработкой опечаток).
- Введены настройки интеграций: default_country, supported_cities, provider, api_key.
- UX площадок: единое поле адреса, список подсказок без «скачков» формы, защита от рассинхрона запросов.
- Валидация: дом обязателен, ошибки приведены к сообщениям “Необходимо указать адрес” и “Не указан дом”.
- Адресные данные обновлены: metro_id перенесен в Address, venue.str_address добавлено для редактирования в статусах moderation/confirmed; редактирование адреса скрывается при этих статусах.
