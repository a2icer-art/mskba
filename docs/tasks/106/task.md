# Задача 106

- task_name: Правила ролей и лимита участников по типам событий
- task_status: выполнено
- task_init_description: #set_task Правила ролей и лимита участников по типам событий
- task_short_description: Определить правила допустимых ролей и применения лимита участников в зависимости от типа события (игровые/неигровые).

## full_description
Нужно закрепить правила участия в событиях в зависимости от типа события.
Уточнения:
- лимит участников применяется ко всем типам событий, но учитывает только роль «player»;
- игровые типы (game, game_training) разрешают игроков как лимитируемых участников и дополнительные роли (судья, медиа и т.п.);
- неигровой тип (training) также использует лимит по игрокам и допускает доп. роли (тренер, медиа и т.п.);
- требуется единое место/слой конфигурации, где описывается: какие типы событий игровые, какие роли допускаются, какая роль является лимитируемой.

## План выполнения задачи
1) Согласовать источник правил (config или таблица event_types) и зафиксировать mapping по типам событий. (subtasks/106-1-rules.md)
2) Обновить доменную логику лимитов и валидации ролей участия по этим правилам. (subtasks/106-2-domain.md)
3) Обновить UI (публичный и админ) для фильтрации ролей и корректных счетчиков. (subtasks/106-3-ui.md)
4) Проверить сценарии и задокументировать. (subtasks/106-4-verify-docs.md)

## Итог
- Введены правила allowed_roles/limit_role по типам событий в config/events.php.
- Лимит участников учитывает только роль limit_role (player) для всех типов.
- UI фильтрует роли участия и считает участников/резерв по limit_role.
