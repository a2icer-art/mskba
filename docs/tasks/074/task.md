# task_name
Системные уведомления по статусам бронирований

# task_status
[x]

# task_init_description
Добавить системные уведомления при всех изменениях статусов бронирования. Уведомления отправляются обеим сторонам, диалоги объединяются по номеру бронирования. Заголовок уведомления — системный текст действия, комментарий модерации (если есть) сохраняется в body.

# task_short_description
Системные уведомления по статусам бронирования с заголовком действия и комментарием в body.

# task_full_description
Нужно добавить системные уведомления для всех изменений статусов бронирования площадки. Уведомления должны отправляться обеим сторонам (создателю бронирования и стороне площадки), при этом уведомления группируются/связываются по номеру бронирования. Заголовок уведомления — фиксированный системный текст, отражающий действие (например, подтверждение/отмена/ожидание оплаты/оплата), а комментарий модератора, если он указан, сохраняется в body. В уведомление также должны проставляться ссылки на бронирование и релевантные сущности/пользователей, чтобы переходить к деталям и открывать диалог при необходимости.

# План выполнения задачи
# План выполнения задачи
1. Матрица статусов и заголовков уведомлений: тексты + правила body (комментарий) и группировки по номеру бронирования. (subtasks/01_mapping.md)
2. Сервис уведомлений бронирований: получатели (создатель + сторона площадки), link/entity/actor/contact_user. (subtasks/02_service.md)
3. Интеграция в переходы статусов бронирований (включая авто‑статусы). (subtasks/03_integration.md)
4. Документация и чек‑лист проверки. (subtasks/04_docs.md)
