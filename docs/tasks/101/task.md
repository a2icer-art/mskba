# task_name
Account: настройки уведомлений и внешних каналов

# task_status
[x]

# task_init_description
В /account (группа "Настройки") добавить раздел настроек уведомлений: список типов уведомлений, которые отправляются в проекте (например "Смена статуса бронирования", "Смена статуса пользователя" и другие — проверить по проекту), с общим переключателем и чекбоксами внешних каналов ("Также отправлять на:"). Каналы: email, telegram, vk и др. типы контактов; по умолчанию выключены. Если контакт есть — показывать значение, если подтвержден — разрешать включать чекбокс. Включенный канал означает дублирование внутреннего уведомления во внешний канал.

# task_short_description
Настройки уведомлений в /account: список типов, переключатели и внешние каналы с учетом подтвержденных контактов.

# task_full_description
Нужно добавить в /account (группа "Настройки") раздел управления уведомлениями пользователя.

Раздел содержит список типов уведомлений, которые уже отправляются в проекте (нужно определить по коду).
Для каждого типа:
- основной чекбокс “включено” (по умолчанию включен);
- блок “Также отправлять на:” с чекбоксами внешних каналов (email, telegram, vk, другие типы контактов).

Правила внешних каналов:
- чекбоксы по умолчанию выключены;
- если контакт отсутствует — показывать значение “—” и чекбокс отключен;
- если контакт есть, но не подтвержден — чекбокс отключен;
- если контакт подтвержден — чекбокс доступен для включения.

При включении внешнего канала система должна дублировать внутреннее уведомление во внешний канал.

Настройки должны храниться централизованно и применяться при отправке уведомлений пользователю.

Примечание по тестированию:
- Верификация email и отправка завязаны на SMTP. Сейчас при попытке отправки на `mail.mskba.ru` фиксируется ошибка несовпадения сертификата (CN `*.cishost.ru`), поэтому подтверждение контакта может не создаваться. Требуется протестировать после решения у хостера.

# План выполнения задачи
1. Аудит текущих типов уведомлений и точек отправки (subtasks/101-1-audit.md).
2. Определить модель и формат хранения пользовательских настроек (subtasks/101-2-settings.md).
3. Реализовать backend: чтение/сохранение настроек, валидация (subtasks/101-3-backend.md).
4. Реализовать UI в /account → Настройки (subtasks/101-4-frontend.md).
5. Подключить настройки к отправке уведомлений и внешним каналам (subtasks/101-5-delivery.md).
