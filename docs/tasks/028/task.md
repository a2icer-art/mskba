# task_name
Подтверждение контактов через код

# task_status
[x]

# task_init_description
Добавить процесс подтверждения контакта через код: при нажатии "Подтвердить" отправлять код на контакт (email/telegram/etc). На фронте кнопка блокируется до ответа, затем появляется поле ввода кода, кнопка меняется на "Отправить код повторно". На бэке пока без реальной отправки — генерировать и сохранять код в БД. Нужна сущность подтверждений (код, ttl, user_id, contact_id и доп. поля).

# task_short_description
Добавить процесс подтверждения контактов с кодом, UX-логикой и сущностью подтверждений.

# full_description
Нужно реализовать процесс подтверждения контактов через одноразовый код: при клике "Подтвердить" запускается генерация кода и запись в БД, фронт блокирует кнопку до ответа, затем показывает поле ввода кода. После первой генерации вместо "Подтвердить" показывать кнопку "Запросить новый код". Если действующий код еще не истек, при нажатии на "Запросить новый код" показывать таймер ожидания. Для разных типов контактов предусматривается соответствующий канал доставки (email/telegram и т.д.), но пока без реальной отправки — только генерация и сохранение кода. Требуется новая сущность подтверждений с полями: user_id, contact_id, code, expires_at (ttl), attempts и служебные поля аудита. При неверном коде увеличивать attempts и показывать оставшиеся попытки, при превышении лимита блокировать ввод и скрывать кнопку "Подтвердить код", при этом оставлять сообщение об исчерпании попыток. При перезагрузке страницы состояние блокировки сохраняется.

# План выполнения задачи
1. Спроектировать доменную сущность подтверждений контактов (модель, миграция, enum статусов) и сервис генерации/валидации кода. (см. `docs/tasks/028/subtasks/step-001.md`)
2. Добавить backend-эндпоинты: запрос кода, повторная отправка, подтверждение ввода кода, лимит попыток и логика TTL. (см. `docs/tasks/028/subtasks/step-002.md`)
3. Обновить вкладку "Контакты": UX блокировки кнопки, поле ввода кода, уведомления и состояния. (см. `docs/tasks/028/subtasks/step-003.md`)
