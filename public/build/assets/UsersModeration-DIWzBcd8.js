import{c as R,a as C,r as _,u as ue,w as ce,b as r,d as e,f as N,e as d,n as S,g as Q,m as O,j as $,v as W,h as l,F as w,i as k,C as xe,l as G,k as X,t as a,A as be,o,z as me,B as Y}from"./app-BG8bJDk_.js";import{_ as ve}from"./Breadcrumbs-BJkTr2TQ.js";import{_ as fe,a as ge}from"./MainHeader-CSzL04-A.js";import{_ as ye}from"./MainSidebar-Gh5823Zl.js";import{_ as _e}from"./SystemNoticeStack-D6BD3byq.js";const he={class:"relative min-h-screen overflow-hidden bg-[#f7f1e6] text-slate-900"},we={class:"relative mx-auto flex max-w-[1360px] flex-col gap-8 px-6 py-8"},ke={class:"rounded-3xl border border-slate-200/80 bg-white/90 p-6 shadow-sm page-content-wrapper"},je={class:"mt-6 rounded-2xl border border-slate-200 bg-slate-50 p-4"},Ce={class:"flex flex-wrap items-center gap-4"},Se={class:"flex flex-col gap-1 text-xs uppercase tracking-[0.15em] text-slate-500"},$e=["value"],Ee={class:"flex flex-col gap-1 text-xs uppercase tracking-[0.15em] text-slate-500"},Fe=["value"],Ve={key:0,class:"mt-6 w-full overflow-x-auto rounded-2xl border border-slate-200"},Ne={class:"min-w-max"},Oe=["onClick"],Ue=["title"],Be={class:"flex flex-wrap items-center gap-2"},Te=["disabled","onClick"],Ae=["disabled","onClick"],Me=["disabled","onClick"],ze=["disabled","onClick"],De={class:"font-semibold text-slate-800"},Le={class:"flex items-center gap-2"},Re=["title"],Ge={key:1,class:"mt-6 rounded-2xl border border-dashed border-slate-200 bg-slate-50 px-4 py-6 text-sm text-slate-500"},He={key:2,class:"mt-6 flex flex-wrap items-center gap-2 text-sm"},Pe={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 px-4"},Je={class:"w-full max-w-lg rounded-3xl border border-slate-200 bg-white shadow-xl"},Ke={class:"popup-body max-h-[500px] overflow-y-auto px-6 pt-4"},Qe={key:0,class:"mt-2 text-xs text-rose-700"},We={class:"popup-footer flex flex-wrap justify-end gap-3 border-t border-slate-200/80 px-6 py-4"},Xe=["disabled"],Ye=["disabled"],Ze={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 px-4"},qe={class:"w-full max-w-lg rounded-3xl border border-slate-200 bg-white shadow-xl"},Ie={class:"popup-body max-h-[500px] overflow-y-auto px-6 pt-4"},et={class:"mt-4 rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-700"},tt={class:"flex flex-wrap items-center justify-between gap-2"},st={class:"font-semibold"},ot={class:"mt-3 grid gap-2 text-sm"},rt={class:"flex items-center justify-between"},lt={class:"flex items-center justify-between"},at={class:"flex items-center justify-between"},nt={class:"flex items-center justify-between"},it={class:"flex items-center justify-between"},dt={class:"flex items-center gap-2"},pt=["title"],ut={class:"mt-4"},ct={key:0,class:"mt-3 max-h-[300px] overflow-y-auto pr-2"},xt={class:"grid gap-4"},bt={class:"text-sm font-semibold text-slate-800"},mt={class:"mt-3 grid gap-2"},vt=["value"],ft={key:1,class:"mt-2 text-sm text-slate-500"},gt={key:2,class:"mt-2 text-xs text-rose-700"},yt={class:"popup-footer flex flex-wrap justify-end gap-3 border-t border-slate-200/80 px-6 py-4"},_t=["disabled"],ht=["disabled"],wt={key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 px-4"},kt={class:"w-full max-w-lg rounded-3xl border border-slate-200 bg-white shadow-xl"},jt={class:"popup-body max-h-[500px] overflow-y-auto px-6 pt-4"},Ct={key:0,class:"mt-2 text-xs text-rose-700"},St={class:"popup-footer flex flex-wrap justify-end gap-3 border-t border-slate-200/80 px-6 py-4"},$t=["disabled"],Et=["disabled"],Ft={key:3,class:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 px-4"},Vt={class:"w-full max-w-lg rounded-3xl border border-slate-200 bg-white shadow-xl"},Nt={class:"popup-body max-h-[500px] overflow-y-auto px-6 pt-4"},Ot={class:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-700"},Ut={class:"flex flex-wrap items-center justify-between gap-2"},Bt={class:"font-semibold"},Tt={class:"mt-3 grid gap-2 text-sm"},At={class:"flex items-center justify-between"},Mt={class:"flex items-center justify-between"},zt={class:"flex items-center justify-between"},Dt={class:"flex items-center justify-between"},Lt={class:"flex items-center justify-between"},Rt={class:"flex items-center gap-2"},Gt=["title"],Ht={class:"mt-4"},Pt={key:0,class:"mt-2 max-h-[240px] overflow-y-auto pr-2"},Jt={class:"grid gap-4"},Kt={class:"text-sm font-semibold text-slate-800"},Qt={class:"mt-3 grid gap-2"},Wt=["value"],Xt={key:1,class:"mt-2 text-sm text-slate-500"},Yt={key:2,class:"mt-2 text-xs text-rose-700"},Zt={class:"popup-footer flex flex-wrap justify-end gap-3 border-t border-slate-200/80 px-6 py-4"},qt=["disabled"],It=["disabled"],ls={__name:"UsersModeration",props:{appName:{type:String,default:"Laravel"},navigation:{type:Object,default:()=>({title:"Разделы",data:[]})},activeHref:{type:String,default:""},filters:{type:Object,default:()=>({status:"",sort:"submitted_at_desc"})},statusOptions:{type:Array,default:()=>[]},sortOptions:{type:Array,default:()=>[]},requests:{type:Object,default:()=>({data:[],links:[]})},permissionGroups:{type:Array,default:()=>[]},breadcrumbs:{type:Array,default:()=>[]}},setup(p){const E=p,H=R(()=>E.navigation?.data??[]),P=R(()=>(H.value?.length??0)>0),h=C({status:E.filters?.status??"",sort:E.filters?.sort??"submitted_at_desc"}),b=_(""),i=_(""),U=_(!1),F=_(null),u=C({reason:""}),m=C({permissions:[]}),c=C({reason:""}),J=C({}),B=_(!1),f=_(null),T=_(!1),V=_(null),A=_(!1),x=_(null),v=C({permissions:[]}),y=ue(),Z={pending:"На модерации",approved:"Подтверждено",rejected:"Отклонено"},j=n=>{if(!n)return"—";const t=new Date(n);return Number.isNaN(t.getTime())?n:t.toLocaleString("ru-RU")},q=()=>{be.get("/admin/users-moderation",{status:h.status,sort:h.sort},{preserveState:!0,replace:!0})};ce(()=>[h.status,h.sort],()=>{q()});const I=n=>{b.value="",i.value="",m.post(`/admin/users-moderation/${n.id}/approve`,{preserveScroll:!0,onSuccess:()=>{b.value="Пользователь подтвержден."},onError:t=>{i.value=t.moderation||"Не удалось подтвердить заявку."},onFinish:()=>{y.props?.errors?.moderation&&(i.value=y.props.errors.moderation)}})},ee=n=>{b.value="",i.value="",c.post(`/admin/users-moderation/${n.id}/block`,{preserveScroll:!0,onSuccess:()=>{b.value="Пользователь заблокирован."},onError:t=>{i.value=t.moderation||c.errors.reason||"Не удалось заблокировать пользователя."},onFinish:()=>{y.props?.errors?.moderation&&(i.value=y.props.errors.moderation)}})},te=n=>{b.value="",i.value="",J.post(`/admin/users-moderation/${n.id}/unblock`,{preserveScroll:!0,onSuccess:()=>{b.value="Пользователь разблокирован."},onError:t=>{i.value=t.moderation||"Не удалось разблокировать пользователя."},onFinish:()=>{y.props?.errors?.moderation&&(i.value=y.props.errors.moderation)}})},se=n=>{b.value="",i.value="",V.value=n,c.reason="",c.clearErrors(),T.value=!0},M=()=>{T.value=!1,V.value=null,c.reset("reason"),c.clearErrors()},oe=()=>{V.value&&(ee(V.value),M())},re=n=>{x.value=n,v.permissions=n?.assigned_permissions?[...n.assigned_permissions]:[],v.clearErrors(),A.value=!0},K=()=>{A.value=!1,x.value=null,v.reset("permissions"),v.clearErrors()},le=n=>{b.value="",i.value="",f.value=n,m.permissions=n?.assigned_permissions?[...n.assigned_permissions]:[],m.clearErrors(),B.value=!0},z=()=>{B.value=!1,f.value=null,m.reset("permissions"),m.clearErrors()},ae=()=>{f.value&&(I(f.value),z())},ne=n=>{b.value="",i.value="",F.value=n,u.reason="",u.clearErrors(),U.value=!0},D=()=>{U.value=!1,F.value=null,u.reset("reason"),u.clearErrors()},ie=()=>{F.value&&u.post(`/admin/users-moderation/${F.value.id}/reject`,{preserveScroll:!0,onSuccess:()=>{b.value="Заявка отклонена.",D()},onError:n=>{i.value=n.moderation||u.errors.reason||"Не удалось отклонить заявку."},onFinish:()=>{y.props?.errors?.moderation&&(i.value=y.props.errors.moderation)}})},de=()=>{x.value&&(b.value="",i.value="",v.post(`/admin/users-moderation/${x.value.id}/permissions`,{preserveScroll:!0,onSuccess:()=>{b.value="Права пользователя обновлены.",x.value&&(x.value.assigned_permissions=[...v.permissions])},onError:n=>{i.value=n.moderation||v.errors.permissions||"Не удалось обновить права."},onFinish:()=>{y.props?.errors?.moderation&&(i.value=y.props.errors.moderation)}}))},pe=R(()=>(E.requests?.data?.length??0)>0);return(n,t)=>(o(),r("div",he,[t[32]||(t[32]=e("div",{class:"pointer-events-none absolute -left-28 top-12 h-72 w-72 rounded-full bg-emerald-200/70 blur-3xl"},null,-1)),t[33]||(t[33]=e("div",{class:"pointer-events-none absolute -right-24 -top-24 h-80 w-80 rounded-full bg-amber-200/70 blur-3xl"},null,-1)),N(_e,{success:b.value,error:i.value},null,8,["success","error"]),e("div",we,[N(fe,{"app-name":p.appName,"is-authenticated":!!n.$page.props.auth?.user,"login-label":n.$page.props.auth?.user?.login},null,8,["app-name","is-authenticated","login-label"]),e("main",{class:S(["grid gap-6",{"lg:grid-cols-[240px_1fr]":P.value}])},[P.value?(o(),Q(ye,{key:0,title:p.navigation.title,data:H.value,"active-href":p.activeHref},null,8,["title","data","active-href"])):d("",!0),e("div",ke,[N(ve,{items:p.breadcrumbs},null,8,["items"]),t[9]||(t[9]=e("h1",{class:"text-3xl font-semibold text-slate-900"},"Модерация пользователей",-1)),e("div",je,[e("div",Ce,[e("label",Se,[t[6]||(t[6]=O(" Статус ",-1)),$(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>l(h).status=s),class:"rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700"},[(o(!0),r(w,null,k(p.statusOptions,s=>(o(),r("option",{key:s.value,value:s.value},a(s.label),9,$e))),128))],512),[[W,l(h).status]])]),e("label",Ee,[t[7]||(t[7]=O(" Сортировка ",-1)),$(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>l(h).sort=s),class:"rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700"},[(o(!0),r(w,null,k(p.sortOptions,s=>(o(),r("option",{key:s.value,value:s.value},a(s.label),9,Fe))),128))],512),[[W,l(h).sort]])])])]),pe.value?(o(),r("div",Ve,[e("div",Ne,[t[8]||(t[8]=xe('<div class="grid grid-cols-[120px_140px_200px_70px_140px_140px_100px_140px_180px_160px_160px_160px] gap-4 bg-slate-50 px-4 py-3 text-xs uppercase tracking-[0.15em] text-slate-500 whitespace-nowrap"><span>Логин</span><span>Статус</span><span>Действия</span><span>ID</span><span>Фамилия</span><span>Имя</span><span>Пол</span><span>Дата рождения</span><span>Контакт</span><span>Отправлено</span><span>Решение</span><span>Кто решил</span></div>',1)),(o(!0),r(w,null,k(p.requests.data,s=>(o(),r("div",{key:s.id,class:"grid grid-cols-[120px_140px_200px_70px_140px_140px_100px_140px_180px_160px_160px_160px] gap-4 border-t border-slate-100 px-4 py-4 text-sm text-slate-700 whitespace-nowrap"},[e("div",null,[e("button",{class:"text-left text-sm font-medium text-slate-800 transition hover:text-slate-700",type:"button",onClick:g=>re(s)},a(s.user?.login||"—"),9,Oe)]),e("div",null,[e("span",{class:S(["rounded-full border border-slate-200 bg-slate-50 px-2 py-0.5 text-xs font-semibold text-slate-600",{"border-amber-200 bg-amber-50 text-amber-800":s.status==="pending","border-emerald-200 bg-emerald-50 text-emerald-700":s.status==="approved","border-rose-200 bg-rose-50 text-rose-700":s.status==="rejected"}]),title:s.submitted_at?j(s.submitted_at):void 0},a(Z[s.status]||"—"),11,Ue)]),e("div",Be,[s.status==="pending"?(o(),r("button",{key:0,class:"rounded-full border border-emerald-300 bg-emerald-50 px-3 py-1 text-xs font-semibold text-emerald-800 transition hover:-translate-y-0.5 hover:border-emerald-400",type:"button",disabled:l(m).processing,onClick:g=>le(s)}," Подтвердить ",8,Te)):d("",!0),s.status==="pending"?(o(),r("button",{key:1,class:"rounded-full border border-rose-300 bg-rose-50 px-3 py-1 text-xs font-semibold text-rose-700 transition hover:-translate-y-0.5 hover:border-rose-400",type:"button",disabled:l(u).processing,onClick:g=>ne(s)}," Отклонить ",8,Ae)):d("",!0),s.status==="approved"&&s.user?.status==="confirmed"?(o(),r("button",{key:2,class:"rounded-full border border-rose-300 bg-rose-50 px-3 py-1 text-xs font-semibold text-rose-700 transition hover:-translate-y-0.5 hover:border-rose-400",type:"button",disabled:l(c).processing,onClick:g=>se(s)}," Заблокировать ",8,Me)):d("",!0),s.status==="approved"&&s.user?.status==="blocked"?(o(),r("button",{key:3,class:"rounded-full border border-emerald-300 bg-emerald-50 px-3 py-1 text-xs font-semibold text-emerald-800 transition hover:-translate-y-0.5 hover:border-emerald-400",type:"button",disabled:l(J).processing,onClick:g=>te(s)}," Разблокировать ",8,ze)):d("",!0)]),e("div",De,"#"+a(s.id),1),e("div",null,a(s.profile?.last_name||"—"),1),e("div",null,a(s.profile?.first_name||"—"),1),e("div",null,a(s.profile?.gender||"—"),1),e("div",null,a(s.profile?.birth_date||"—"),1),e("div",Le,[e("span",null,a(s.contact?.value||"—"),1),s.contact?.confirmed_at?(o(),r("span",{key:0,class:"text-emerald-600",title:j(s.contact.confirmed_at)}," ✓ ",8,Re)):d("",!0)]),e("div",null,a(s.submitted_at?j(s.submitted_at):"—"),1),e("div",null,a(s.reviewed_at?j(s.reviewed_at):"—"),1),e("div",null,a(s.reviewer?.login||"—"),1)]))),128))])])):(o(),r("div",Ge," Заявки не найдены. ")),p.requests.links?.length?(o(),r("div",He,[(o(!0),r(w,null,k(p.requests.links,s=>(o(),Q(l(me),{key:s.label,class:S(["rounded-full border border-slate-200 px-3 py-1 text-slate-600 transition hover:-translate-y-0.5 hover:border-slate-300",{"bg-slate-900 text-white":s.active,"pointer-events-none opacity-50":!s.url}]),href:s.url||"",innerHTML:s.label},null,8,["class","href","innerHTML"]))),128))])):d("",!0)])],2),N(ge,{"app-name":p.appName},null,8,["app-name"])]),U.value?(o(),r("div",Pe,[e("div",Je,[e("form",{class:S({loading:l(u).processing}),onSubmit:G(ie,["prevent"])},[e("div",{class:"popup-header flex items-center justify-between border-b border-slate-200/80 px-6 py-4"},[t[10]||(t[10]=e("h2",{class:"text-lg font-semibold text-slate-900"},"Отклонить заявку",-1)),e("button",{class:"rounded-full border border-slate-200 px-2.5 py-1 text-sm text-slate-500 transition hover:border-slate-300 hover:text-slate-700",type:"button","aria-label":"Закрыть",onClick:D}," x ")]),e("div",Ke,[t[11]||(t[11]=e("p",{class:"text-sm text-slate-600"}," Вы можете указать причину отклонения. Она будет показана пользователю. ",-1)),$(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=s=>l(u).reason=s),class:"mt-4 min-h-[120px] w-full rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-700 focus:border-slate-400 focus:outline-none",placeholder:"Причина отклонения (необязательно)"},null,512),[[X,l(u).reason]]),l(u).errors.reason?(o(),r("div",Qe,a(l(u).errors.reason),1)):d("",!0)]),e("div",We,[e("button",{class:"rounded-full border border-slate-200 px-4 py-2 text-sm text-slate-600 transition hover:-translate-y-0.5 hover:border-slate-300",type:"button",disabled:l(u).processing,onClick:D}," Закрыть ",8,Xe),e("button",{class:"rounded-full border border-rose-600 bg-rose-600 px-4 py-2 text-sm font-semibold text-white transition hover:-translate-y-0.5 hover:bg-rose-700",type:"submit",disabled:l(u).processing}," Отклонить ",8,Ye)])],34)])])):d("",!0),B.value?(o(),r("div",Ze,[e("div",qe,[e("form",{class:S({loading:l(m).processing}),onSubmit:G(ae,["prevent"])},[e("div",{class:"popup-header flex items-center justify-between border-b border-slate-200/80 px-6 py-4"},[t[12]||(t[12]=e("h2",{class:"text-lg font-semibold text-slate-900"},"Подтвердить пользователя",-1)),e("button",{class:"rounded-full border border-slate-200 px-2.5 py-1 text-sm text-slate-500 transition hover:border-slate-300 hover:text-slate-700",type:"button","aria-label":"Закрыть",onClick:z}," x ")]),e("div",Ie,[t[21]||(t[21]=e("p",{class:"text-sm text-slate-600"},' Пользователь будет подтвержден, а заявка переведена в статус "Подтверждено". ',-1)),e("div",et,[e("div",tt,[t[13]||(t[13]=e("span",{class:"text-xs uppercase tracking-[0.15em] text-slate-500"},"Пользователь",-1)),e("span",st,a(f.value?.user?.login||"—"),1)]),e("div",ot,[e("div",rt,[t[14]||(t[14]=e("span",{class:"text-xs uppercase tracking-[0.15em] text-slate-500"},"Фамилия",-1)),e("span",null,a(f.value?.profile?.last_name||"—"),1)]),e("div",lt,[t[15]||(t[15]=e("span",{class:"text-xs uppercase tracking-[0.15em] text-slate-500"},"Имя",-1)),e("span",null,a(f.value?.profile?.first_name||"—"),1)]),e("div",at,[t[16]||(t[16]=e("span",{class:"text-xs uppercase tracking-[0.15em] text-slate-500"},"Пол",-1)),e("span",null,a(f.value?.profile?.gender||"—"),1)]),e("div",nt,[t[17]||(t[17]=e("span",{class:"text-xs uppercase tracking-[0.15em] text-slate-500"},"Дата рождения",-1)),e("span",null,a(f.value?.profile?.birth_date||"—"),1)]),e("div",it,[t[18]||(t[18]=e("span",{class:"text-xs uppercase tracking-[0.15em] text-slate-500"},"Контакт",-1)),e("span",dt,[O(a(f.value?.contact?.value||"—")+" ",1),f.value?.contact?.confirmed_at?(o(),r("span",{key:0,class:"text-emerald-600",title:j(f.value?.contact?.confirmed_at)}," ✓ ",8,pt)):d("",!0)])])])]),e("div",ut,[t[19]||(t[19]=e("p",{class:"text-xs uppercase tracking-[0.15em] text-slate-500"},"Права после подтверждения",-1)),t[20]||(t[20]=e("p",{class:"mt-2 text-xs text-slate-500"}," Выберите права, которые будут назначены пользователю после подтверждения. ",-1)),p.permissionGroups.length?(o(),r("div",ct,[e("div",xt,[(o(!0),r(w,null,k(p.permissionGroups,s=>(o(),r("div",{key:s.key,class:"rounded-2xl border border-slate-200 bg-white px-4 py-3"},[e("p",bt,a(s.title),1),e("div",mt,[(o(!0),r(w,null,k(s.items,g=>(o(),r("label",{key:g.code,class:"flex items-start gap-2 text-sm text-slate-700"},[$(e("input",{"onUpdate:modelValue":t[3]||(t[3]=L=>l(m).permissions=L),type:"checkbox",class:"mt-1 h-4 w-4 rounded border-slate-300 text-emerald-600 focus:ring-emerald-300",value:g.code},null,8,vt),[[Y,l(m).permissions]]),e("span",null,a(g.label),1)]))),128))])]))),128))])])):(o(),r("div",ft," Права не загружены. ")),l(m).errors.permissions?(o(),r("div",gt,a(l(m).errors.permissions),1)):d("",!0)])]),e("div",yt,[e("button",{class:"rounded-full border border-slate-200 px-4 py-2 text-sm text-slate-600 transition hover:-translate-y-0.5 hover:border-slate-300",type:"button",disabled:l(m).processing,onClick:z}," Закрыть ",8,_t),e("button",{class:"rounded-full border border-emerald-600 bg-emerald-600 px-4 py-2 text-sm font-semibold text-white transition hover:-translate-y-0.5 hover:bg-emerald-700",type:"submit",disabled:l(m).processing}," Подтвердить ",8,ht)])],34)])])):d("",!0),T.value?(o(),r("div",wt,[e("div",kt,[e("form",{class:S({loading:l(c).processing}),onSubmit:G(oe,["prevent"])},[e("div",{class:"popup-header flex items-center justify-between border-b border-slate-200/80 px-6 py-4"},[t[22]||(t[22]=e("h2",{class:"text-lg font-semibold text-slate-900"},"Заблокировать пользователя",-1)),e("button",{class:"rounded-full border border-slate-200 px-2.5 py-1 text-sm text-slate-500 transition hover:border-slate-300 hover:text-slate-700",type:"button","aria-label":"Закрыть",onClick:M}," x ")]),e("div",jt,[t[23]||(t[23]=e("p",{class:"text-sm text-slate-600"}," Укажите причину блокировки (необязательно). Она может быть использована в коммуникации с пользователем. ",-1)),$(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=s=>l(c).reason=s),class:"mt-4 min-h-[120px] w-full rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-700 focus:border-slate-400 focus:outline-none",placeholder:"Причина блокировки (необязательно)"},null,512),[[X,l(c).reason]]),l(c).errors.reason?(o(),r("div",Ct,a(l(c).errors.reason),1)):d("",!0)]),e("div",St,[e("button",{class:"rounded-full border border-slate-200 px-4 py-2 text-sm text-slate-600 transition hover:-translate-y-0.5 hover:border-slate-300",type:"button",disabled:l(c).processing,onClick:M}," Закрыть ",8,$t),e("button",{class:"rounded-full border border-rose-600 bg-rose-600 px-4 py-2 text-sm font-semibold text-white transition hover:-translate-y-0.5 hover:bg-rose-700",type:"submit",disabled:l(c).processing}," Заблокировать ",8,Et)])],34)])])):d("",!0),A.value?(o(),r("div",Ft,[e("div",Vt,[e("div",{class:"popup-header flex items-center justify-between border-b border-slate-200/80 px-6 py-4"},[t[24]||(t[24]=e("h2",{class:"text-lg font-semibold text-slate-900"},"Данные пользователя",-1)),e("button",{class:"rounded-full border border-slate-200 px-2.5 py-1 text-sm text-slate-500 transition hover:border-slate-300 hover:text-slate-700",type:"button","aria-label":"Закрыть",onClick:K}," x ")]),e("div",Nt,[e("div",Ot,[e("div",Ut,[t[25]||(t[25]=e("span",{class:"text-xs uppercase tracking-[0.15em] text-slate-500"},"Пользователь",-1)),e("span",Bt,a(x.value?.user?.login||"—"),1)]),e("div",Tt,[e("div",At,[t[26]||(t[26]=e("span",{class:"text-xs uppercase tracking-[0.15em] text-slate-500"},"Фамилия",-1)),e("span",null,a(x.value?.profile?.last_name||"—"),1)]),e("div",Mt,[t[27]||(t[27]=e("span",{class:"text-xs uppercase tracking-[0.15em] text-slate-500"},"Имя",-1)),e("span",null,a(x.value?.profile?.first_name||"—"),1)]),e("div",zt,[t[28]||(t[28]=e("span",{class:"text-xs uppercase tracking-[0.15em] text-slate-500"},"Пол",-1)),e("span",null,a(x.value?.profile?.gender||"—"),1)]),e("div",Dt,[t[29]||(t[29]=e("span",{class:"text-xs uppercase tracking-[0.15em] text-slate-500"},"Дата рождения",-1)),e("span",null,a(x.value?.profile?.birth_date||"—"),1)]),e("div",Lt,[t[30]||(t[30]=e("span",{class:"text-xs uppercase tracking-[0.15em] text-slate-500"},"Контакт",-1)),e("span",Rt,[O(a(x.value?.contact?.value||"—")+" ",1),x.value?.contact?.confirmed_at?(o(),r("span",{key:0,class:"text-emerald-600",title:j(x.value?.contact?.confirmed_at)}," ✓ ",8,Gt)):d("",!0)])])])]),e("div",Ht,[t[31]||(t[31]=e("p",{class:"text-xs uppercase tracking-[0.15em] text-slate-500"},"Права пользователя",-1)),p.permissionGroups.length?(o(),r("div",Pt,[e("div",Jt,[(o(!0),r(w,null,k(p.permissionGroups,s=>(o(),r("div",{key:s.key,class:"rounded-2xl border border-slate-200 bg-white px-4 py-3"},[e("p",Kt,a(s.title),1),e("div",Qt,[(o(!0),r(w,null,k(s.items,g=>(o(),r("label",{key:g.code,class:"flex items-start gap-2 text-sm text-slate-700"},[$(e("input",{"onUpdate:modelValue":t[5]||(t[5]=L=>l(v).permissions=L),type:"checkbox",class:"mt-1 h-4 w-4 rounded border-slate-300 text-emerald-600 focus:ring-emerald-300",value:g.code},null,8,Wt),[[Y,l(v).permissions]]),e("span",null,a(g.label),1)]))),128))])]))),128))])])):(o(),r("div",Xt," Права не загружены. ")),l(v).errors.permissions?(o(),r("div",Yt,a(l(v).errors.permissions),1)):d("",!0)])]),e("div",Zt,[e("button",{class:"rounded-full border border-slate-200 px-4 py-2 text-sm text-slate-600 transition hover:-translate-y-0.5 hover:border-slate-300",type:"button",disabled:l(v).processing,onClick:K}," Закрыть ",8,qt),e("button",{class:"rounded-full border border-slate-900 bg-slate-900 px-4 py-2 text-sm font-semibold text-white transition hover:-translate-y-0.5 hover:bg-slate-800 disabled:cursor-not-allowed disabled:border-slate-300 disabled:bg-slate-200 disabled:text-slate-500 disabled:hover:translate-y-0",type:"button",disabled:l(v).processing,onClick:de}," Сохранить ",8,It)])])])):d("",!0)]))}};export{ls as default};
