import{c as x,r as i,q as N,p as R,D as I,b as a,e as d,o as n,d as m,E as A,t as p,F as E,i as z,n as L,f as O,y as V,h as $,z as H}from"./app-BG8bJDk_.js";const M={key:0,class:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-500"},j={class:"space-y-4"},D={key:0,class:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400"},G={class:"space-y-3 text-sm font-medium"},P={key:0,class:"inline-flex h-5 min-w-[20px] items-center justify-center rounded-full bg-rose-500 px-1 text-[10px] font-semibold text-white"},B=12,q={__name:"MainSidebar",props:{title:{type:String,default:"Навигация"},data:{type:Array,default:null},items:{type:Array,default:()=>[]},activeHref:{type:String,default:""}},setup(u){const v=u,C=x(()=>Array.isArray(v.data)?v.data:v.items),b=x(()=>{const e=C.value;return!Array.isArray(e)||e.length===0?[]:e.some(t=>Array.isArray(t?.items))?e.filter(t=>Array.isArray(t?.items)&&t.items.length>0).map(t=>({title:t?.title??"",items:t.items})):[{title:"",items:e}]}),F=x(()=>b.value.length>0),g=e=>{if(e==null||e==="")return"";const s=Number(e);return Number.isFinite(s)?s<=0?"":s>9?"…":String(s):String(e)},y=i(null),c=i(null),w=i(0),k=i(0),_=i(0),S=i(0),f=i(0),l=i(!1),h=()=>{if(!c.value||!y.value)return;const e=y.value.getBoundingClientRect(),s=c.value.getBoundingClientRect();w.value=s.height||0,k.value=e.left||0,_.value=e.width||0,l.value||(S.value=window.scrollY+e.top);const t=getComputedStyle(document.documentElement).getPropertyValue("--app-header-offset"),r=parseInt(t,10);f.value=(Number.isFinite(r)?r:0)+B},o=()=>{if(!c.value)return;const e=getComputedStyle(document.documentElement).getPropertyValue("--app-header-offset"),s=parseInt(e,10);f.value=(Number.isFinite(s)?s:0)+B,l.value=window.scrollY>=S.value-f.value};return N(()=>{R(()=>{h(),o()}),window.addEventListener("resize",h),window.addEventListener("resize",o),window.addEventListener("scroll",o,{passive:!0})}),I(()=>{window.removeEventListener("resize",h),window.removeEventListener("resize",o),window.removeEventListener("scroll",o)}),(e,s)=>F.value?(n(),a("div",{key:0,ref_key:"wrapperRef",ref:y,class:"hidden sm:block"},[l.value?(n(),a("div",{key:0,style:A({height:`${w.value}px`})},null,4)):d("",!0),m("aside",{ref_key:"sidebarRef",ref:c,class:L(["self-start flex flex-col gap-4 rounded-3xl border border-slate-200/80 bg-white/80 p-5 shadow-sm",l.value?"fixed z-30":"relative"]),style:A(l.value?{top:`${f.value}px`,left:`${k.value}px`,width:`${_.value}px`}:{})},[u.title?(n(),a("p",M,p(u.title),1)):d("",!0),m("div",j,[(n(!0),a(E,null,z(b.value,t=>(n(),a("div",{key:t.title||t.items[0]?.href,class:"space-y-3"},[t.title?(n(),a("p",D,p(t.title),1)):d("",!0),m("ul",G,[(n(!0),a(E,null,z(t.items,r=>(n(),a("li",{key:r.href,class:L(["rounded-2xl px-4 py-3 transition",r.href===u.activeHref?"bg-slate-900 text-white":"bg-slate-100 text-slate-700 hover:bg-amber-100/70"])},[O($(H),{class:"flex items-center justify-between gap-3",href:r.href},{default:V(()=>[m("span",null,p(r.label),1),g(r.badge)?(n(),a("span",P,p(g(r.badge)),1)):d("",!0)]),_:2},1032,["href"])],2))),128))])]))),128))])],6)],512)):d("",!0)}};export{q as _};
