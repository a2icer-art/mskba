import{c,u as kt,a as F,r as p,w as wt,b as r,d as a,e as i,f as _e,n as D,g as Ct,h as d,F as j,i as B,j as N,v as Ge,k as T,t as n,l as ie,m as Q,o as l,p as Et}from"./app-BG8bJDk_.js";import{_ as St}from"./Breadcrumbs-BJkTr2TQ.js";import{u as Vt,_ as Nt,a as $t}from"./MainHeader-CSzL04-A.js";import{_ as jt}from"./MainSidebar-Gh5823Zl.js";const At={class:"relative min-h-screen overflow-hidden bg-[#f7f1e6] text-slate-900"},Ut={class:"relative mx-auto flex max-w-[1360px] flex-col gap-8 px-6 py-8"},Rt={class:"rounded-3xl border border-slate-200/80 bg-white/90 p-6 shadow-sm page-content-wrapper"},Ft={class:"flex flex-wrap items-center justify-between gap-4"},Bt={class:"mt-6 grid gap-4"},Tt={class:"flex items-center justify-between py-3"},Ot={class:"text-xs uppercase tracking-[0.15em] text-slate-500"},Pt={class:"flex flex-wrap items-center justify-end gap-2 text-sm font-medium text-slate-800"},Dt={key:0},Mt=["title"],Lt={key:1,class:"rounded-full border border-rose-200 bg-rose-50 px-2 py-0.5 text-xs font-semibold text-rose-700"},qt=["title"],zt=["title"],It=["disabled"],Gt=["disabled"],Ht={key:0,class:"pb-3"},Wt={key:0,class:"rounded-2xl border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-700"},Jt={class:"mt-1 list-disc space-y-1 pl-4"},Kt={key:1,class:"rounded-2xl border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-700"},Qt={key:2,class:"rounded-2xl border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-600"},Xt={key:3,class:"rounded-2xl border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-700"},Yt={key:4,class:"rounded-2xl border border-emerald-200 bg-emerald-50 px-3 py-2 text-xs text-emerald-700"},Zt={key:1,class:"rounded-2xl border border-slate-200 bg-slate-50 p-4"},es={class:"text-xs uppercase tracking-[0.15em] text-slate-500"},ts={class:"text-sm font-medium text-slate-800"},ss={key:0,class:"space-y-4 rounded-2xl border border-slate-200 bg-white px-4 py-4"},ls={class:"flex flex-wrap items-center gap-3"},rs={class:"flex-1"},as=["onUpdate:modelValue","disabled"],os={key:1,class:"flex flex-wrap items-center gap-2"},ds={class:"text-sm font-medium text-slate-800"},is=["title"],ns={class:"flex flex-wrap items-center gap-2"},us=["disabled","onClick"],bs=["disabled"],cs=["disabled","onClick"],xs=["disabled","onClick"],ps=["disabled","onClick"],vs={key:0,class:"space-y-2"},ms={class:"flex flex-wrap items-center gap-3"},fs=["onUpdate:modelValue","disabled","onInput"],ys={key:0,class:"rounded-2xl border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-700"},_s={key:1,class:"rounded-2xl border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-700"},gs=["disabled","onClick"],hs={key:3,class:"rounded-2xl border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-700"},ks={key:4,class:"rounded-2xl border border-emerald-200 bg-emerald-50 px-3 py-2 text-xs text-emerald-700"},ws={key:1,class:"rounded-2xl border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-700"},Cs={key:2,class:"rounded-2xl border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-800"},Es={key:3,class:"rounded-2xl border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-700"},Ss={key:4,class:"rounded-2xl border border-emerald-200 bg-emerald-50 px-3 py-2 text-xs text-emerald-700"},Vs={class:"mt-4 space-y-2 border-t border-slate-100 pt-4"},Ns={key:0,class:"text-xs text-slate-500"},$s={class:"px-2 text-xs font-semibold uppercase tracking-[0.2em] text-slate-500"},js={class:"flex flex-wrap items-center gap-3"},As={class:"flex-1"},Us=["disabled"],Rs={key:1,class:"flex flex-wrap items-center gap-2"},Fs={class:"text-sm font-medium text-slate-800"},Bs=["title"],Ts={class:"flex flex-wrap items-center gap-2"},Os=["disabled","onClick"],Ps=["disabled"],Ds=["disabled","onClick"],Ms=["disabled","onClick"],Ls=["disabled","onClick"],qs={key:0,class:"space-y-2"},zs={class:"flex flex-wrap items-center gap-3"},Is=["onUpdate:modelValue","disabled","onInput"],Gs={key:0,class:"rounded-2xl border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-700"},Hs={key:1,class:"rounded-2xl border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-700"},Ws=["disabled","onClick"],Js={key:3,class:"rounded-2xl border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-700"},Ks={key:4,class:"rounded-2xl border border-emerald-200 bg-emerald-50 px-3 py-2 text-xs text-emerald-700"},Qs={key:1,class:"rounded-2xl border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-700"},Xs={key:2,class:"rounded-2xl border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-800"},Ys={key:3,class:"rounded-2xl border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-700"},Zs={key:4,class:"rounded-2xl border border-emerald-200 bg-emerald-50 px-3 py-2 text-xs text-emerald-700"},el={class:"space-y-4 rounded-2xl border border-slate-200 bg-white px-4 py-4"},tl={class:"flex flex-wrap items-center gap-3"},sl={class:"w-full sm:w-40"},ll=["disabled"],rl=["value"],al={class:"flex-1"},ol=["disabled"],dl=["disabled"],il={key:0,class:"rounded-2xl border border-rose-200 bg-rose-50 px-3 py-2 text-xs text-rose-700"},nl={key:1,class:"rounded-2xl border border-emerald-200 bg-emerald-50 px-3 py-2 text-xs text-emerald-700"},ul={key:2,class:"text-xs text-slate-500"},bl={key:3,class:"rounded-2xl border border-slate-200 bg-slate-50 p-4"},cl={key:0,class:"flex flex-wrap gap-2"},xl={key:1,class:"text-sm text-slate-500"},pl={key:4,class:"rounded-2xl border border-slate-200 bg-slate-50 p-4"},vl={class:"grid gap-3 sm:grid-cols-2"},ml={class:"rounded-2xl border border-slate-200 bg-white px-4 py-3"},fl={class:"mt-2 text-xl font-semibold text-slate-900"},yl={class:"rounded-2xl border border-slate-200 bg-white px-4 py-3"},_l={class:"mt-2 text-xl font-semibold text-slate-900"},gl={class:"mt-4 flex flex-wrap items-center gap-3 text-sm text-slate-700"},hl={key:0,class:"text-xs text-rose-700"},kl={key:1,class:"text-xs text-slate-500"},wl={key:5,class:"rounded-2xl border border-slate-200 bg-slate-50 p-4"},Cl={class:"text-xs uppercase tracking-[0.15em] text-slate-500"},El={class:"text-sm font-medium text-slate-800"},Sl={class:"w-full max-w-lg rounded-3xl border border-slate-200 bg-white shadow-xl"},Vl={class:"max-h-[500px] overflow-y-auto px-6 py-4"},Nl={key:0,class:"mt-3 rounded-2xl border border-slate-200 bg-slate-50 px-3 py-2 text-xs text-slate-600"},$l={class:"font-semibold text-slate-700"},jl={key:0,class:"mt-2 space-y-2"},Al={class:"text-[10px] uppercase tracking-[0.15em] text-slate-500"},Ul={class:"text-xs font-medium text-slate-800"},Rl={class:"mt-4 flex flex-col gap-3"},Fl={key:0,class:"flex flex-col gap-1 text-xs uppercase tracking-[0.15em] text-slate-500"},Bl={key:1,class:"text-xs text-rose-700"},Tl={key:2,class:"flex flex-col gap-1 text-xs uppercase tracking-[0.15em] text-slate-500"},Ol={key:3,class:"text-xs text-rose-700"},Pl={class:"flex flex-col gap-1 text-xs uppercase tracking-[0.15em] text-slate-500"},Dl={key:4,class:"text-xs text-rose-700"},Ml={key:5,class:"flex flex-col gap-1 text-xs uppercase tracking-[0.15em] text-slate-500"},Ll={key:6,class:"text-xs text-rose-700"},ql={key:7,class:"flex flex-col gap-1 text-xs uppercase tracking-[0.15em] text-slate-500"},zl={key:8,class:"text-xs text-rose-700"},Il={key:1,class:"mt-3 rounded-2xl border border-emerald-200 bg-emerald-50 px-3 py-2 text-xs text-emerald-700"},Gl={class:"flex flex-wrap justify-end gap-3 border-t border-slate-200/80 px-6 py-4"},Hl=["disabled"],Wl=["disabled"],Jl={class:"w-full max-w-lg rounded-3xl border border-slate-200 bg-white shadow-xl"},Kl={class:"max-h-[500px] overflow-y-auto px-6 py-4"},Ql={class:"mt-4 flex flex-col gap-1 text-xs uppercase tracking-[0.15em] text-slate-500"},Xl={key:0,class:"text-xs text-rose-700"},Yl={key:1,class:"mt-3 rounded-2xl border border-emerald-200 bg-emerald-50 px-3 py-2 text-xs text-emerald-700"},Zl={class:"flex flex-wrap justify-end gap-3 border-t border-slate-200/80 px-6 py-4"},er=["disabled"],tr=["disabled"],He="Попытки израсходованы. Запросите новый код.",or={__name:"Account",props:{appName:{type:String,default:"Laravel"},user:{type:Object,default:null},profile:{type:Object,default:null},participantRoles:{type:Array,default:()=>[]},emails:{type:Array,default:()=>[]},contacts:{type:Array,default:()=>[]},contactTypes:{type:Array,default:()=>[]},contactVerifications:{type:Object,default:()=>({})},moderationRequest:{type:Object,default:null},permissions:{type:Array,default:()=>[]},balance:{type:Object,default:()=>({})},activeTab:{type:String,default:"user"},navigation:{type:Object,default:()=>({title:"Аккаунт",data:[]})},breadcrumbs:{type:Array,default:()=>[]}},setup(_){const u=_,ge=c(()=>u.navigation?.data??u.navigation??[]),he=c(()=>{if(ge.value.length)return ge.value;const e=[{title:"",items:[{key:"user",label:"Пользователь",href:"/account"},{key:"profile",label:"Профиль",href:"/account/profile"},{key:"contacts",label:"Контакты",href:"/account/contacts"},{key:"balance",label:"Баланс",href:"/account/balance"},{key:"messages",label:"Сообщения",href:"/account/messages"}]},{title:"Настройки",items:[{key:"access",label:"Доступы",href:"/account/access"},{key:"messages-settings",label:"Сообщения",href:"/account/settings/messages"}]}],t=u.participantRoles.map(s=>({key:`role-${s.id}`,label:s.label,href:`/account/roles/${s.id}`}));return[...e,...t]}),O=c(()=>u.activeTab||"user"),le=kt(),ke=c(()=>he.value.find(t=>t.key===O.value)?.href??le.url??""),L=c(()=>u.moderationRequest??null),ne=c(()=>L.value?.status==="pending"),X=c(()=>L.value?.status==="rejected"),We=c(()=>L.value?.reviewed_at??L.value?.submitted_at),Je=c(()=>L.value?.reject_reason??""),ue=c(()=>!!L.value?.reject_reason),Ke=c(()=>ue.value),be=c(()=>u.user?.status==="confirmed"),Qe=c(()=>u.user?.status==="blocked"),A=c(()=>be.value||ne.value),we=c(()=>{if(!A.value)return[];const e={first_name:"Имя",last_name:"Фамилия",gender:"Пол",birth_date:"Дата рождения"},t={first_name:u.profile?.first_name??"-",last_name:u.profile?.last_name??"-",gender:u.profile?.gender_label??"-",birth_date:u.profile?.birth_date_display??"-"};return Object.keys(e).map(s=>({key:s,label:e[s],value:t[s]}))}),{unreadCount:Xe}=Vt({enabled:!!u.user?.id}),Ce=e=>e.key==="messages"?{...e,badge:Xe.value}:e,ce=c(()=>he.value.map(e=>Array.isArray(e?.items)?{...e,items:e.items.map(Ce)}:Ce(e))),Ee=c(()=>ce.value.length>0),Ye=F({}),q=e=>{if(!e)return"-";const t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleString("ru-RU")},Ze=c(()=>[{key:"id",label:"ID",value:u.user?.id??"—"},{key:"login",label:"Логин",value:u.user?.login??"—"},{key:"password",label:"Пароль",value:"********"},{key:"created_at",label:"Дата регистрации",value:q(u.user?.created_at)},{key:"status",label:"Статус",value:""},...u.user?.status==="confirmed"?[{key:"confirmed_at",label:"Дата подтверждения",value:q(u.user?.confirmed_at)}]:[]]),et=c(()=>[{label:"Имя",value:u.profile?.first_name??"-"},{label:"Фамилия",value:u.profile?.last_name??"-"},{label:"Отчество",value:u.profile?.middle_name??"-"},{label:"Пол",value:u.profile?.gender_label??"-"},{label:"Дата рождения",value:u.profile?.birth_date_display??"-"}]),tt=e=>[{label:"Роль",value:e.label??"—"},{label:"Alias",value:e.alias??"—"}],Se=c(()=>u.participantRoles.find(e=>`role-${e.id}`===O.value)??null),Ve=c(()=>u.permissions??[]),$=c(()=>u.balance??{}),st=c(()=>$.value?.status==="blocked"?"Заблокирован":"Активен"),Ne=(e,t)=>{const s=Number(e??0),o=t||"RUB";return`${(Number.isNaN(s)?0:s).toLocaleString("ru-RU")} ${o}`},$e=c(()=>[...u.emails].sort((e,t)=>e.id-t.id)),lt=c(()=>{const e=new Map;return[...u.contacts].filter(t=>t.type&&t.type!=="email").sort((t,s)=>t.id-s.id).forEach(t=>{e.has(t.type)||e.set(t.type,[]),e.get(t.type).push(t)}),Array.from(e.entries()).map(([t,s])=>({type:t,label:rt.value[t]??t,items:s}))}),rt=c(()=>u.contactTypes.reduce((e,t)=>(e[t.value]=t.label,e),{})),m=F({type:"",value:""}),k=F({email:""}),w=F({value:""}),je=F({}),z=F({code:""}),Y=F({}),re=F({}),b=F({first_name:"",last_name:"",middle_name:"",gender:"",birth_date:""}),C=F({password:""}),U=p(null),R=p(null),S=p({}),g=p({}),V=p({}),f=p({}),Z=p(""),ae=p(""),ee=p([]),te=p(""),I=p(""),xe=p(!1),pe=p(!1),y=p({}),P=p({}),G=p({}),h=p({}),v=p({}),E=p({}),se=new Map,H=p({}),M=c(()=>U.value!==null||R.value!==null),at=c(()=>!M.value),oe=c(()=>!M.value),Ae=e=>q(e),Ue=e=>y.value[e]||!!W(e)?"Запросить новый код":"Подтвердить",Re=e=>!!y.value[e],Fe=c(()=>u.contactVerifications??{}),W=e=>H.value[e]??Fe.value[e]??null,Be=e=>{const t=W(e);return t?t.attempts>=t.max_attempts:!1},ot=e=>{const t=W(e);return!t||!t.expires_at||!Be(e)?!1:new Date(t.expires_at).getTime()>Date.now()},dt=e=>{const t=W(e);if(!t||!t.expires_at)return 0;const s=new Date(t.expires_at),o=Math.floor((s.getTime()-Date.now())/1e3);return Math.max(0,o)},Te=e=>{const t=Math.max(0,Math.floor(Number(e)||0));if(t<=0)return"00:00";const s=Math.floor(t/60),o=t%60;return`${String(s).padStart(2,"0")}:${String(o).padStart(2,"0")}`},it=c(()=>m.processing||k.processing||w.processing||je.processing||z.processing||Y.processing),J=e=>!!Be(e),de=(e,t)=>{if(se.has(e)&&(clearInterval(se.get(e)),se.delete(e)),t<=0){E.value={...E.value,[e]:0};return}E.value={...E.value,[e]:t};const s=setInterval(()=>{const o=E.value[e]??0;if(o<=1){clearInterval(s),se.delete(e),E.value={...E.value,[e]:0};return}E.value={...E.value,[e]:o-1}},1e3);se.set(e,s)},nt=(e,t,s)=>{const o=Fe.value[e]??{};H.value={...H.value,[e]:{...o,attempts:t,max_attempts:s??o.max_attempts}},ve()},Oe=e=>{if(!H.value[e])return;const t={...H.value};delete t[e],H.value=t,ve()},ve=()=>{const e={};u.contacts.forEach(t=>{if(t.confirmed_at){e[t.id]=!1;return}W(t.id)&&(e[t.id]=!0)}),y.value={...y.value,...e}};wt(()=>u.contactVerifications,()=>{ve()},{immediate:!0,deep:!0});const ut=e=>{e.confirmed_at||(R.value=null,U.value=e.id,k.email=e.email,k.clearErrors(),g.value={...g.value,[e.id]:""})},Pe=()=>{U.value=null,k.reset("email"),k.clearErrors()},bt=e=>{e.confirmed_at||(U.value=null,R.value=e.id,w.value=e.value,w.clearErrors(),f.value={...f.value,[e.id]:""},Z.value="")},De=()=>{R.value=null,w.reset("value"),w.clearErrors()},ct=()=>{Z.value="",m.post("/account/contacts",{preserveScroll:!0,onSuccess:()=>{m.reset("type","value"),Z.value="Контакт добавлен."}})},Me=(e,t)=>{if(ot(e.id)){de(e.id,dt(e.id)),t.value={...t.value,[e.id]:"Слишком много попыток. Подождите."};return}t.value={...t.value,[e.id]:""},v.value={...v.value,[e.id]:""},h.value={...h.value,[e.id]:!1},G.value={...G.value,[e.id]:!0},je.post(`/account/contacts/${e.id}/confirm-request`,{preserveScroll:!0,preserveState:!0,onSuccess:()=>{y.value={...y.value,[e.id]:!0},P.value={...P.value,[e.id]:""},de(e.id,0),Oe(e.id)},onError:s=>{const o=s.contact||s.email;o&&(t.value={...t.value,[e.id]:o});const x=Number(s.wait_seconds??0);x>0&&de(e.id,x)},onFinish:()=>{G.value={...G.value,[e.id]:!1}}})},Le=(e,t)=>{t.value={...t.value,[e.id]:""},v.value={...v.value,[e.id]:""},h.value={...h.value,[e.id]:!1};const s=P.value[e.id];if(!s){t.value={...t.value,[e.id]:"Введите код."},v.value={...v.value,[e.id]:"Введите код."},h.value={...h.value,[e.id]:!0};return}z.code=s,z.post(`/account/contacts/${e.id}/confirm-verify`,{preserveScroll:!0,preserveState:!0,onSuccess:()=>{y.value={...y.value,[e.id]:!1},P.value={...P.value,[e.id]:""},v.value={...v.value,[e.id]:""},de(e.id,0),Oe(e.id)},onError:o=>{const x=o.code||o.contact;x&&(t.value={...t.value,[e.id]:x},v.value={...v.value,[e.id]:x},y.value={...y.value,[e.id]:!0},h.value={...h.value,[e.id]:!0});const K=Number(o.attempts_left??NaN),Ie=Number(o.max_attempts??NaN);if(!Number.isNaN(K)){const ye=Number.isNaN(Ie)?W(e.id)?.max_attempts:Ie;ye&&nt(e.id,Math.max(0,ye-K),ye)}},onFinish:()=>{Et(()=>{const o=le.props?.errors?.code,K=z.errors.code||o;K&&(t.value={...t.value,[e.id]:K},v.value={...v.value,[e.id]:K},y.value={...y.value,[e.id]:!0},h.value={...h.value,[e.id]:!0})})}})},qe=e=>{h.value={...h.value,[e]:!1},v.value={...v.value,[e]:""}},xt=e=>{S.value={...S.value,[e.id]:""},g.value={...g.value,[e.id]:""},k.patch(`/account/emails/${e.id}`,{preserveScroll:!0,onSuccess:()=>{S.value={...S.value,[e.id]:"Email обновлен."},Pe()}})},pt=e=>{S.value={...S.value,[e.id]:""},g.value={...g.value,[e.id]:""},Y.delete(`/account/emails/${e.id}`,{preserveScroll:!0,onSuccess:()=>{S.value={...S.value,[e.id]:"Email удален."}},onError:t=>{t.email&&(g.value={...g.value,[e.id]:t.email})}})},vt=e=>{V.value={...V.value,[e.id]:""},f.value={...f.value,[e.id]:""},Y.delete(`/account/contacts/${e.id}`,{preserveScroll:!0,onSuccess:()=>{V.value={...V.value,[e.id]:"Контакт удален."}},onError:t=>{t.contact&&(f.value={...f.value,[e.id]:t.contact})}})},mt=e=>{V.value={...V.value,[e.id]:""},f.value={...f.value,[e.id]:""},w.patch(`/account/contacts/${e.id}`,{preserveScroll:!0,onSuccess:()=>{V.value={...V.value,[e.id]:"Контакт обновлен."},De()},onError:t=>{t.contact&&(f.value={...f.value,[e.id]:t.contact})}})},ze=()=>{ae.value="",ee.value=[],re.post("/account/moderation-request",{preserveScroll:!0,onSuccess:()=>{ae.value="Заявка отправлена на модерацию."},onError:e=>{e.moderation&&(ee.value=e.moderation.split(`
`).filter(Boolean))},onFinish:()=>{le.props?.errors?.moderation&&(ee.value=le.props.errors.moderation.split(`
`).filter(Boolean))}})},ft=()=>{te.value="",I.value="",b.clearErrors(),C.clearErrors(),b.first_name=u.profile?.first_name??"",b.last_name=u.profile?.last_name??"",b.middle_name=u.profile?.middle_name??"",b.gender=u.profile?.gender??"",b.birth_date=u.profile?.birth_date??"",xe.value=!0},me=()=>{xe.value=!1,b.reset("first_name","last_name","middle_name","gender","birth_date"),b.clearErrors()},yt=()=>{te.value="",b.transform(e=>be.value?{middle_name:e.middle_name}:e).patch("/account/profile",{preserveScroll:!0,onSuccess:()=>{te.value="Профиль обновлен."}})},_t=()=>{I.value="",C.clearErrors(),pe.value=!0},fe=()=>{pe.value=!1,C.reset("password"),C.clearErrors()},gt=()=>{I.value="",C.patch("/account/password",{preserveScroll:!0,onSuccess:()=>{I.value="Пароль обновлен.",C.reset("password")}})},ht=()=>{Ye.post("/logout")};return(e,t)=>(l(),r("div",At,[t[27]||(t[27]=a("div",{class:"pointer-events-none absolute -left-28 top-12 h-72 w-72 rounded-full bg-emerald-200/70 blur-3xl"},null,-1)),t[28]||(t[28]=a("div",{class:"pointer-events-none absolute -right-24 -top-24 h-80 w-80 rounded-full bg-amber-200/70 blur-3xl"},null,-1)),a("div",Ut,[_e(Nt,{"app-name":_.appName,"is-authenticated":!0,"login-label":_.user?.login,"sidebar-title":_.navigation?.title||"Аккаунт","sidebar-items":ce.value,"sidebar-active-href":ke.value},null,8,["app-name","login-label","sidebar-title","sidebar-items","sidebar-active-href"]),a("main",{class:D(["grid gap-6",{"lg:grid-cols-[240px_1fr]":Ee.value}])},[Ee.value?(l(),Ct(jt,{key:0,title:_.navigation?.title||"Аккаунт",data:ce.value,"active-href":ke.value},null,8,["title","data","active-href"])):i("",!0),a("div",Rt,[_e(St,{items:_.breadcrumbs},null,8,["items"]),a("div",Ft,[t[9]||(t[9]=a("div",null,[a("h1",{class:"text-3xl font-semibold text-slate-900"},"Профиль пользователя")],-1)),O.value==="profile"?(l(),r("button",{key:0,class:"rounded-full border border-slate-900 bg-slate-900 px-4 py-2 text-sm font-semibold text-white transition hover:-translate-y-0.5 hover:bg-slate-800",type:"button",onClick:ft}," Редактировать ")):O.value==="user"?(l(),r("button",{key:1,class:"rounded-full border border-slate-900 bg-slate-900 px-4 py-2 text-sm font-semibold text-white transition hover:-translate-y-0.5 hover:bg-slate-800",type:"button",onClick:_t}," Изменить пароль ")):i("",!0)]),a("div",Bt,[O.value==="user"?(l(),r("div",{key:0,class:D(["rounded-2xl border border-slate-200 bg-slate-50 p-4",{loading:d(re).processing}])},[(l(!0),r(j,null,B(Ze.value,s=>(l(),r("div",{key:s.key,class:"border-b border-slate-100 last:border-b-0"},[a("div",Tt,[a("span",Ot,n(s.label),1),a("div",Pt,[s.key!=="status"?(l(),r("span",Dt,n(s.value),1)):i("",!0),s.key==="status"?(l(),r(j,{key:1},[_.user?.status==="confirmed"?(l(),r("span",{key:0,class:"rounded-full border border-emerald-200 bg-emerald-50 px-2 py-0.5 text-xs font-semibold text-emerald-700",title:q(_.user?.confirmed_at)}," Подтвержден ",8,Mt)):_.user?.status==="blocked"?(l(),r("span",Lt," Заблокирован ")):ne.value?(l(),r("span",{key:2,class:"rounded-full border border-amber-200 bg-amber-50 px-2 py-0.5 text-xs font-semibold text-amber-800",title:q(L.value?.submitted_at)}," На модерации ",8,qt)):X.value&&!ue.value?(l(),r("span",{key:3,class:"rounded-full border border-rose-200 bg-rose-50 px-2 py-0.5 text-xs font-semibold text-rose-700",title:q(We.value)}," Отклонено ",8,zt)):i("",!0),X.value&&Ke.value&&_.user?.status==="unconfirmed"?(l(),r("button",{key:4,class:"rounded-full border border-slate-900 bg-slate-900 px-3 py-1 text-xs font-semibold text-white transition hover:-translate-y-0.5 hover:bg-slate-800",type:"button",disabled:d(re).processing,onClick:ze}," Отправить повторно ",8,It)):!ne.value&&!X.value&&_.user?.status==="unconfirmed"?(l(),r("button",{key:5,class:"rounded-full border border-slate-900 bg-slate-900 px-3 py-1 text-xs font-semibold text-white transition hover:-translate-y-0.5 hover:bg-slate-800",type:"button",disabled:d(re).processing,onClick:ze}," Отправить на модерацию ",8,Gt)):i("",!0)],64)):i("",!0)])]),s.key==="status"?(l(),r("div",Ht,[ee.value.length?(l(),r("div",Wt,[t[10]||(t[10]=a("p",{class:"font-semibold"},"Не выполнены требования:",-1)),a("ul",Jt,[(l(!0),r(j,null,B(ee.value,(o,x)=>(l(),r("li",{key:x},n(o),1))),128))])])):X.value&&ue.value?(l(),r("div",Kt,n(Je.value),1)):X.value?(l(),r("div",Qt," Причина отклонения пока не указана. Повторная отправка станет доступна после комментария модератора. ")):_.user?.status==="blocked"?(l(),r("div",Xt,n(_.user?.block_reason||"Причина блокировки не определена."),1)):ae.value?(l(),r("div",Yt,n(ae.value),1)):i("",!0)])):i("",!0)]))),128))],2)):O.value==="profile"?(l(),r("div",Zt,[(l(!0),r(j,null,B(et.value,s=>(l(),r("div",{key:s.label,class:"flex items-center justify-between border-b border-slate-100 py-3 last:border-b-0"},[a("span",es,n(s.label),1),a("span",ts,n(s.value),1)]))),128))])):O.value==="contacts"?(l(),r("div",{key:2,class:D(["rounded-2xl border border-slate-200 bg-slate-50 p-4 space-y-4",{loading:it.value}])},[$e.value.length?(l(),r("fieldset",ss,[t[11]||(t[11]=a("legend",{class:"px-2 text-xs font-semibold uppercase tracking-[0.2em] text-slate-500"},"Электронная почта",-1)),(l(!0),r(j,null,B($e.value,s=>(l(),r("div",{key:s.id,class:"space-y-2"},[a("div",ls,[a("div",rs,[U.value===s.id?N((l(),r("input",{key:0,"onUpdate:modelValue":o=>d(k).email=o,class:"w-full rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-700 focus:border-slate-400 focus:outline-none",type:"email",autocomplete:"email",disabled:d(k).processing},null,8,as)),[[T,d(k).email]]):(l(),r("div",os,[a("span",ds,n(s.email),1),s.confirmed_at?(l(),r("span",{key:0,class:"rounded-full border border-emerald-200 bg-emerald-50 px-2 py-0.5 text-xs font-semibold text-emerald-700",title:Ae(s.confirmed_at)}," Подтвержден ",8,is)):i("",!0)]))]),a("div",ns,[U.value===s.id?(l(),r("button",{key:0,class:"rounded-full border border-slate-300 px-3 py-1 text-xs font-semibold text-slate-700 transition hover:-translate-y-0.5 hover:border-slate-400",type:"button",disabled:d(k).processing,onClick:o=>xt(s)}," Сохранить ",8,us)):i("",!0),U.value===s.id?(l(),r("button",{key:1,class:"rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold text-slate-500 transition hover:-translate-y-0.5 hover:border-slate-300",type:"button",disabled:d(k).processing,onClick:Pe}," Отмена ",8,bs)):s.confirmed_at?i("",!0):(l(),r("button",{key:2,class:"rounded-full border border-slate-300 px-3 py-1 text-xs font-semibold text-slate-700 transition hover:-translate-y-0.5 hover:border-slate-400",type:"button",disabled:M.value,onClick:o=>ut(s)}," Редактировать ",8,cs)),!s.confirmed_at&&U.value!==s.id?(l(),r("button",{key:3,class:"rounded-full border border-amber-300 bg-amber-50 px-3 py-1 text-xs font-semibold text-amber-800 transition hover:-translate-y-0.5 hover:border-amber-400",type:"button",disabled:G.value[s.id]||M.value,onClick:o=>Me(s,g.value)},n(Ue(s.id)),9,xs)):i("",!0),!s.confirmed_at&&U.value!==s.id?(l(),r("button",{key:4,class:"rounded-full border border-rose-300 bg-rose-50 px-3 py-1 text-xs font-semibold text-rose-700 transition hover:-translate-y-0.5 hover:border-rose-400",type:"button",disabled:d(Y).processing||M.value,onClick:o=>pt(s)}," Удалить ",8,ps)):i("",!0)])]),Re(s.id)&&!s.confirmed_at?(l(),r("div",vs,[a("div",ms,[N(a("input",{"onUpdate:modelValue":o=>P.value[s.id]=o,class:D(["w-full rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-700 focus:border-slate-400 focus:outline-none",{"input-error":h.value[s.id]}]),type:"text",placeholder:"Введите код",disabled:J(s.id),onInput:o=>qe(s.id)},null,42,fs),[[T,P.value[s.id]]])]),v.value[s.id]?(l(),r("div",ys,n(v.value[s.id]),1)):J(s.id)?(l(),r("div",_s,n(He))):i("",!0),J(s.id)?i("",!0):(l(),r("button",{key:2,class:"rounded-full border border-slate-900 bg-slate-900 px-4 py-2 text-xs font-semibold text-white transition hover:-translate-y-0.5 hover:bg-slate-800",type:"button",disabled:d(z).processing,onClick:o=>Le(s,g.value)}," Подтвердить код ",8,gs)),g.value[s.id]?(l(),r("div",hs,n(g.value[s.id]),1)):S.value[s.id]?(l(),r("div",ks,n(S.value[s.id]),1)):i("",!0)])):i("",!0),U.value===s.id&&d(k).errors.email?(l(),r("div",ws,n(d(k).errors.email),1)):E.value[s.id]?(l(),r("div",Cs," Подождите "+n(Te(E.value[s.id])),1)):g.value[s.id]&&!y.value[s.id]?(l(),r("div",Es,n(g.value[s.id]),1)):S.value[s.id]&&!y.value[s.id]?(l(),r("div",Ss,n(S.value[s.id]),1)):i("",!0)]))),128)),a("div",Vs,[at.value?i("",!0):(l(),r("p",Ns," Сначала сохраните или отмените текущую правку контакта. "))])])):i("",!0),(l(!0),r(j,null,B(lt.value,s=>(l(),r("fieldset",{key:s.type,class:"space-y-4 rounded-2xl border border-slate-200 bg-white px-4 py-4"},[a("legend",$s,n(s.label),1),(l(!0),r(j,null,B(s.items,o=>(l(),r("div",{key:o.id,class:"space-y-2"},[a("div",js,[a("div",As,[R.value===o.id?N((l(),r("input",{key:0,"onUpdate:modelValue":t[0]||(t[0]=x=>d(w).value=x),class:"w-full rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-700 focus:border-slate-400 focus:outline-none",type:"text",disabled:d(w).processing},null,8,Us)),[[T,d(w).value]]):(l(),r("div",Rs,[a("span",Fs,n(o.value),1),o.confirmed_at?(l(),r("span",{key:0,class:"rounded-full border border-emerald-200 bg-emerald-50 px-2 py-0.5 text-xs font-semibold text-emerald-700",title:Ae(o.confirmed_at)}," Подтвержден ",8,Bs)):i("",!0)]))]),a("div",Ts,[R.value===o.id?(l(),r("button",{key:0,class:"rounded-full border border-slate-300 px-3 py-1 text-xs font-semibold text-slate-700 transition hover:-translate-y-0.5 hover:border-slate-400",type:"button",disabled:d(w).processing,onClick:x=>mt(o)}," Сохранить ",8,Os)):i("",!0),R.value===o.id?(l(),r("button",{key:1,class:"rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold text-slate-500 transition hover:-translate-y-0.5 hover:border-slate-300",type:"button",disabled:d(w).processing,onClick:De}," Отмена ",8,Ps)):o.confirmed_at?i("",!0):(l(),r("button",{key:2,class:"rounded-full border border-slate-300 px-3 py-1 text-xs font-semibold text-slate-700 transition hover:-translate-y-0.5 hover:border-slate-400",type:"button",disabled:M.value,onClick:x=>bt(o)}," Редактировать ",8,Ds)),!o.confirmed_at&&R.value!==o.id?(l(),r("button",{key:3,class:"rounded-full border border-amber-300 bg-amber-50 px-3 py-1 text-xs font-semibold text-amber-800 transition hover:-translate-y-0.5 hover:border-amber-400",type:"button",disabled:G.value[o.id]||M.value,onClick:x=>Me(o,f.value)},n(Ue(o.id)),9,Ms)):i("",!0),!o.confirmed_at&&R.value!==o.id?(l(),r("button",{key:4,class:"rounded-full border border-rose-300 bg-rose-50 px-3 py-1 text-xs font-semibold text-rose-700 transition hover:-translate-y-0.5 hover:border-rose-400",type:"button",disabled:d(Y).processing||M.value,onClick:x=>vt(o)}," Удалить ",8,Ls)):i("",!0)])]),Re(o.id)&&!o.confirmed_at?(l(),r("div",qs,[a("div",zs,[N(a("input",{"onUpdate:modelValue":x=>P.value[o.id]=x,class:D(["w-full rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-700 focus:border-slate-400 focus:outline-none",{"input-error":h.value[o.id]}]),type:"text",placeholder:"Введите код",disabled:J(o.id),onInput:x=>qe(o.id)},null,42,Is),[[T,P.value[o.id]]])]),v.value[o.id]?(l(),r("div",Gs,n(v.value[o.id]),1)):J(o.id)?(l(),r("div",Hs,n(He))):i("",!0),J(o.id)?i("",!0):(l(),r("button",{key:2,class:"rounded-full border border-slate-900 bg-slate-900 px-4 py-2 text-xs font-semibold text-white transition hover:-translate-y-0.5 hover:bg-slate-800",type:"button",disabled:d(z).processing,onClick:x=>Le(o,f.value)}," Подтвердить код ",8,Ws)),f.value[o.id]?(l(),r("div",Js,n(f.value[o.id]),1)):V.value[o.id]?(l(),r("div",Ks,n(V.value[o.id]),1)):i("",!0)])):i("",!0),R.value===o.id&&d(w).errors.value?(l(),r("div",Qs,n(d(w).errors.value),1)):E.value[o.id]?(l(),r("div",Xs," Подождите "+n(Te(E.value[o.id])),1)):f.value[o.id]&&!y.value[o.id]?(l(),r("div",Ys,n(f.value[o.id]),1)):V.value[o.id]&&!y.value[o.id]?(l(),r("div",Zs,n(V.value[o.id]),1)):i("",!0)]))),128))]))),128)),a("fieldset",el,[t[13]||(t[13]=a("legend",{class:"px-2 text-xs font-semibold uppercase tracking-[0.2em] text-slate-500"},"Добавить контакт",-1)),a("div",tl,[a("div",sl,[N(a("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>d(m).type=s),class:"w-full rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-700 focus:border-slate-400 focus:outline-none",disabled:!oe.value||d(m).processing},[t[12]||(t[12]=a("option",{value:""},"Тип контакта",-1)),(l(!0),r(j,null,B(_.contactTypes,s=>(l(),r("option",{key:s.value,value:s.value},n(s.label),9,rl))),128))],8,ll),[[Ge,d(m).type]])]),a("div",al,[N(a("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>d(m).value=s),class:"w-full rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-700 focus:border-slate-400 focus:outline-none",type:"text",placeholder:"Значение контакта",disabled:!oe.value||d(m).processing},null,8,ol),[[T,d(m).value]])]),a("button",{class:"rounded-full border border-slate-900 bg-slate-900 px-4 py-2 text-xs font-semibold text-white transition hover:-translate-y-0.5 hover:bg-slate-800",type:"button",disabled:!d(m).type||!d(m).value||d(m).processing||!oe.value,onClick:ct}," Добавить ",8,dl)]),d(m).errors.value||d(m).errors.type?(l(),r("div",il,n(d(m).errors.value||d(m).errors.type),1)):Z.value?(l(),r("div",nl,n(Z.value),1)):i("",!0),oe.value?i("",!0):(l(),r("p",ul," Сначала сохраните или отмените текущую правку контакта. "))])],2)):O.value==="access"?(l(),r("div",bl,[Ve.value.length?(l(),r("div",cl,[(l(!0),r(j,null,B(Ve.value,s=>(l(),r("span",{key:s.code,class:D(["inline-flex items-center gap-2 rounded-full border px-3 py-1 text-xs",Qe.value?"border-rose-200 bg-rose-50 text-rose-700":"border-slate-200 bg-slate-50 text-slate-700"])},n(s.label),3))),128))])):(l(),r("div",xl," Права не назначены. "))])):O.value==="balance"?(l(),r("div",pl,[a("div",vl,[a("div",ml,[t[14]||(t[14]=a("span",{class:"text-xs uppercase tracking-[0.15em] text-slate-500"},"Доступно",-1)),a("div",fl,n(Ne($.value.available_amount,$.value.currency)),1)]),a("div",yl,[t[15]||(t[15]=a("span",{class:"text-xs uppercase tracking-[0.15em] text-slate-500"},"В удержании",-1)),a("div",_l,n(Ne($.value.held_amount,$.value.currency)),1)])]),a("div",gl,[a("span",{class:D(["inline-flex items-center rounded-full border px-3 py-1 text-xs font-semibold",$.value.status==="blocked"?"border-rose-200 bg-rose-50 text-rose-700":"border-emerald-200 bg-emerald-50 text-emerald-700"])},n(st.value),3),$.value.block_reason?(l(),r("span",hl," Причина: "+n($.value.block_reason),1)):i("",!0),$.value.blocked_at&&$.value.status==="blocked"?(l(),r("span",kl,n(q($.value.blocked_at)),1)):i("",!0)])])):Se.value?(l(),r("div",wl,[(l(!0),r(j,null,B(tt(Se.value),s=>(l(),r("div",{key:s.label,class:"flex items-center justify-between border-b border-slate-100 py-3 last:border-b-0"},[a("span",Cl,n(s.label),1),a("span",El,n(s.value),1)]))),128))])):i("",!0)]),a("div",{class:"mt-8 flex items-center justify-end"},[a("button",{class:"rounded-full border border-slate-300 px-5 py-2 text-sm font-medium text-slate-700 transition hover:-translate-y-0.5 hover:border-slate-400",type:"button",onClick:ht}," Выйти ")])])],2),_e($t,{"app-name":_.appName},null,8,["app-name"])]),xe.value?(l(),r("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 px-4",onClick:ie(me,["self"])},[a("div",Sl,[a("form",{class:D({loading:d(b).processing}),onSubmit:ie(yt,["prevent"])},[a("div",{class:"flex items-center justify-between border-b border-slate-200/80 px-6 py-4"},[t[16]||(t[16]=a("h2",{class:"text-lg font-semibold text-slate-900"},"Редактирование профиля",-1)),a("button",{class:"rounded-full border border-slate-200 px-2.5 py-1 text-sm text-slate-500 transition hover:border-slate-300 hover:text-slate-700",type:"button","aria-label":"Закрыть",onClick:me}," x ")]),a("div",Vl,[t[23]||(t[23]=a("p",{class:"text-sm text-slate-600"}," Заполните доступные поля профиля и сохраните изменения. ",-1)),A.value?(l(),r("div",Nl,[a("p",$l,n(be.value?"Подтвержденная информация":"Данная информация на модерации"),1),we.value.length?(l(),r("div",jl,[(l(!0),r(j,null,B(we.value,s=>(l(),r("div",{key:s.key,class:"flex items-center justify-between gap-3"},[a("span",Al,n(s.label),1),a("span",Ul,n(s.value),1)]))),128))])):i("",!0)])):i("",!0),a("div",Rl,[A.value?i("",!0):(l(),r("label",Fl,[t[17]||(t[17]=Q(" Имя ",-1)),N(a("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>d(b).first_name=s),class:"rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 disabled:bg-slate-100",type:"text"},null,512),[[T,d(b).first_name]])])),!A.value&&d(b).errors.first_name?(l(),r("div",Bl,n(d(b).errors.first_name),1)):i("",!0),A.value?i("",!0):(l(),r("label",Tl,[t[18]||(t[18]=Q(" Фамилия ",-1)),N(a("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>d(b).last_name=s),class:"rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 disabled:bg-slate-100",type:"text"},null,512),[[T,d(b).last_name]])])),!A.value&&d(b).errors.last_name?(l(),r("div",Ol,n(d(b).errors.last_name),1)):i("",!0),a("label",Pl,[t[19]||(t[19]=Q(" Отчество ",-1)),N(a("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>d(b).middle_name=s),class:"rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700",type:"text"},null,512),[[T,d(b).middle_name]])]),d(b).errors.middle_name?(l(),r("div",Dl,n(d(b).errors.middle_name),1)):i("",!0),A.value?i("",!0):(l(),r("label",Ml,[t[21]||(t[21]=Q(" Пол ",-1)),N(a("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>d(b).gender=s),class:"rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 disabled:bg-slate-100"},[...t[20]||(t[20]=[a("option",{value:""},"Не определен",-1),a("option",{value:"male"},"Мужской",-1),a("option",{value:"female"},"Женский",-1)])],512),[[Ge,d(b).gender]])])),!A.value&&d(b).errors.gender?(l(),r("div",Ll,n(d(b).errors.gender),1)):i("",!0),A.value?i("",!0):(l(),r("label",ql,[t[22]||(t[22]=Q(" Дата рождения ",-1)),N(a("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>d(b).birth_date=s),class:"rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 disabled:bg-slate-100",type:"date"},null,512),[[T,d(b).birth_date]])])),!A.value&&d(b).errors.birth_date?(l(),r("div",zl,n(d(b).errors.birth_date),1)):i("",!0)]),te.value?(l(),r("div",Il,n(te.value),1)):i("",!0)]),a("div",Gl,[a("button",{class:"rounded-full border border-slate-200 px-4 py-2 text-sm text-slate-600 transition hover:-translate-y-0.5 hover:border-slate-300",type:"button",disabled:d(b).processing,onClick:me}," Закрыть ",8,Hl),a("button",{class:"rounded-full border border-slate-900 bg-slate-900 px-4 py-2 text-sm font-semibold text-white transition hover:-translate-y-0.5 hover:bg-slate-800",type:"submit",disabled:d(b).processing}," Сохранить ",8,Wl)])],34)])])):i("",!0),pe.value?(l(),r("div",{key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 px-4",onClick:ie(fe,["self"])},[a("div",Jl,[a("form",{class:D({loading:d(C).processing}),onSubmit:ie(gt,["prevent"])},[a("div",{class:"flex items-center justify-between border-b border-slate-200/80 px-6 py-4"},[t[24]||(t[24]=a("h2",{class:"text-lg font-semibold text-slate-900"},"Изменить пароль",-1)),a("button",{class:"rounded-full border border-slate-200 px-2.5 py-1 text-sm text-slate-500 transition hover:border-slate-300 hover:text-slate-700",type:"button","aria-label":"Закрыть",onClick:fe}," x ")]),a("div",Kl,[t[26]||(t[26]=a("p",{class:"text-sm text-slate-600"},"Укажите новый пароль для вашей учетной записи.",-1)),a("label",Ql,[t[25]||(t[25]=Q(" Новый пароль ",-1)),N(a("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>d(C).password=s),class:"rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700",type:"password",autocomplete:"new-password"},null,512),[[T,d(C).password]])]),d(C).errors.password?(l(),r("div",Xl,n(d(C).errors.password),1)):i("",!0),I.value?(l(),r("div",Yl,n(I.value),1)):i("",!0)]),a("div",Zl,[a("button",{class:"rounded-full border border-slate-200 px-4 py-2 text-sm text-slate-600 transition hover:-translate-y-0.5 hover:border-slate-300",type:"button",disabled:d(C).processing,onClick:fe}," Закрыть ",8,er),a("button",{class:"rounded-full border border-slate-900 bg-slate-900 px-4 py-2 text-sm font-semibold text-white transition hover:-translate-y-0.5 hover:bg-slate-800",type:"submit",disabled:d(C).processing}," Сохранить ",8,tr)])],34)])])):i("",!0)]))}};export{or as default};
