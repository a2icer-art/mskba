import{u as _e,c,r as w,a as R,w as he,b as l,d as e,f as B,e as d,n as f,g as ke,t as i,F as j,i as C,l as z,h as o,j as g,m as $,k as S,v as we,o as r,B as le}from"./app-BG8bJDk_.js";import{_ as Se}from"./Breadcrumbs-BJkTr2TQ.js";import{_ as je,a as Ce}from"./MainHeader-CSzL04-A.js";import{_ as $e}from"./MainSidebar-Gh5823Zl.js";import{_ as Te}from"./SystemNoticeStack-D6BD3byq.js";const qe={class:"relative min-h-screen overflow-hidden bg-[#f7f1e6] text-slate-900"},Ve={class:"relative mx-auto flex max-w-[1360px] flex-col gap-8 px-6 py-8"},Ue={class:"rounded-3xl border border-slate-200/80 bg-white/90 p-6 shadow-sm page-content-wrapper"},Ee={class:"flex flex-wrap items-center justify-between gap-4"},Ae={class:"mt-6 rounded-2xl border border-slate-200 bg-white px-4 py-5"},Ne={class:"mt-4 grid gap-4 md:grid-cols-2"},Re={class:"rounded-2xl border border-slate-200 bg-slate-50 p-4"},Be={class:"flex items-center justify-between gap-3"},Pe={key:0,class:"rounded-full border border-emerald-200 bg-emerald-50 px-2 py-0.5 text-xs font-semibold text-emerald-700"},De={class:"mt-3 text-sm text-slate-600"},Oe={key:0,class:"mb-2"},Fe={key:2,class:"text-slate-500"},Me={class:"rounded-2xl border border-slate-200 bg-slate-50 p-4"},Le={class:"flex items-center justify-between gap-3"},ze={key:0,class:"rounded-full border border-emerald-200 bg-emerald-50 px-2 py-0.5 text-xs font-semibold text-emerald-700"},Ie={class:"mt-3 text-sm text-slate-600"},He={key:0,class:"mb-2"},We={key:2,class:"text-slate-500"},Ge={key:0,class:"mt-6"},Je={key:0,class:"grid gap-4"},Ke={class:"flex flex-wrap items-start justify-between gap-4"},Qe={class:"text-lg font-semibold text-slate-900"},Xe={class:"mt-1 text-sm text-slate-600"},Ye={class:"flex flex-wrap items-center gap-2"},Ze=["disabled","onClick"],et=["disabled","onClick"],tt={class:"mt-4 grid gap-2 text-sm text-slate-700"},st={class:"flex items-center justify-between"},rt={class:"flex items-center justify-between"},lt={class:"flex items-center justify-between"},at={key:0,class:"flex items-start justify-between gap-3"},ot={class:"text-right"},nt={class:"mt-4"},it={key:0,class:"mt-2 flex flex-wrap gap-2"},dt={key:1,class:"mt-2 text-sm text-slate-500"},ut={key:1,class:"rounded-2xl border border-dashed border-slate-200 bg-white px-4 py-6 text-sm text-slate-500"},pt={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 px-4"},ct={class:"w-full max-w-lg rounded-3xl border border-slate-200 bg-white shadow-xl"},xt={class:"popup-body max-h-[500px] overflow-y-auto px-6 pt-4"},bt={class:"text-sm text-slate-600"},mt={class:"mt-4 grid gap-3"},vt={class:"max-h-[300px] overflow-y-auto rounded-2xl border border-slate-200 bg-white p-3"},ft={key:0,class:"grid gap-2 text-sm text-slate-700"},gt=["value"],yt={key:1,class:"text-sm text-slate-500"},_t={key:0,class:"text-xs text-rose-700"},ht={class:"popup-footer flex flex-wrap justify-end gap-3 border-t border-slate-200/80 px-6 py-4"},kt=["disabled"],wt=["disabled"],St={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 px-4"},jt={class:"w-full max-w-lg rounded-3xl border border-slate-200 bg-white shadow-xl"},Ct={class:"popup-body max-h-[500px] overflow-y-auto px-6 pt-4"},$t={class:"mt-4 grid gap-3"},Tt={class:"relative"},qt={class:"flex flex-col gap-1 text-xs uppercase tracking-[0.15em] text-slate-500"},Vt={key:0,class:"text-xs text-rose-700"},Ut={key:1,class:"text-xs text-rose-700"},Et={key:2,class:"text-xs text-rose-700"},At={key:3,class:"absolute left-0 right-0 z-10 mt-2 w-full rounded-2xl border border-slate-200 bg-white text-sm text-slate-700"},Nt=["onClick"],Rt={class:"font-semibold"},Bt={key:0,class:"text-xs text-slate-500"},Pt={class:"flex flex-col gap-1 text-xs uppercase tracking-[0.15em] text-slate-500"},Dt=["value"],Ot={key:0,class:"text-xs text-rose-700"},Ft={class:"flex flex-col gap-1 text-xs uppercase tracking-[0.15em] text-slate-500"},Mt={class:"grid gap-3 md:grid-cols-2"},Lt={class:"flex flex-col gap-1 text-xs uppercase tracking-[0.15em] text-slate-500"},zt={class:"flex flex-col gap-1 text-xs uppercase tracking-[0.15em] text-slate-500"},It={key:1,class:"text-xs text-rose-700"},Ht={class:"flex flex-col gap-1 text-xs uppercase tracking-[0.15em] text-slate-500"},Wt={key:0,class:"mt-2 grid gap-2"},Gt=["value"],Jt={key:1,class:"mt-2 text-sm text-slate-500"},Kt={key:2,class:"mt-2 text-xs text-rose-700"},Qt={class:"popup-footer flex flex-wrap justify-end gap-3 border-t border-slate-200/80 px-6 py-4"},Xt=["disabled"],Yt=["disabled"],Zt={key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 px-4"},es={class:"w-full max-w-lg rounded-3xl border border-slate-200 bg-white shadow-xl"},ts={class:"popup-header flex items-center justify-between border-b border-slate-200/80 px-6 py-4"},ss={class:"text-lg font-semibold text-slate-900"},rs={class:"popup-body max-h-[500px] overflow-y-auto px-6 pt-4"},ls={key:0,class:"mt-2 text-xs text-rose-700"},as={key:1,class:"mt-2 text-xs text-rose-700"},os={class:"popup-footer flex flex-wrap justify-end gap-3 border-t border-slate-200/80 px-6 py-4"},ns=["disabled"],is=["disabled"],ms={__name:"VenueContracts",props:{appName:{type:String,default:"Laravel"},venue:{type:Object,default:null},contracts:{type:Array,default:()=>[]},availablePermissions:{type:Array,default:()=>[]},contractTypes:{type:Array,default:()=>[]},contractModeration:{type:Object,default:()=>({})},canAssignContracts:{type:Boolean,default:!1},canViewContracts:{type:Boolean,default:!1},navigation:{type:Object,default:()=>({title:"Площадки",data:[]})},activeHref:{type:String,default:""},activeTypeSlug:{type:String,default:""},breadcrumbs:{type:Array,default:()=>[]}},setup(y){const u=y,I=_e(),H=c(()=>u.navigation?.data??u.navigation?.items??[]),W=c(()=>(H.value?.length??0)>0),P=c(()=>u.canViewContracts),ae=c(()=>P.value&&u.contracts?.length>0),U=w(!1),E=w(!1),h=w(null),D=w(!1),A=w(""),G=()=>new Date().toISOString().slice(0,10),a=R({login:"",user_id:"",name:"",contract_type:"",starts_at:G(),ends_at:"",comment:"",permissions:[]}),p=R({contract_type:"",comment:""}),m=R({permissions:[]}),J=R({}),oe=c(()=>I.props?.flash?.notice??""),ne=c(()=>I.props?.errors?.contract??""),T=w(!1),k=w(""),_=w([]);let O=null,N=0;const ie=c(()=>a.processing||!a.user_id||!a.contract_type?!0:!a.starts_at),K=(n,t={})=>n?t.ignoreTypeWhenCreator&&n==="creator"?u.availablePermissions:u.availablePermissions.filter(s=>s.allowed_types?s.allowed_types.includes(n):!0):[],F=c(()=>K(a.contract_type)),Q=c(()=>K(h.value?.contract_type,{ignoreTypeWhenCreator:!0})),de=c(()=>m.processing?!0:!h.value),X={creator:"Создатель",owner:"Владелец",supervisor:"Супервайзер",employee:"Сотрудник"},Y={pending:"На рассмотрении",approved:"Подтверждено",clarification:"Требуются уточнения",rejected:"Отклонено"},Z=c(()=>u.contractModeration??{}),q=c(()=>Z.value.owner??{}),V=c(()=>Z.value.supervisor??{}),x=c(()=>q.value.request??null),b=c(()=>V.value.request??null),ue=n=>n?X[n]||n:"—",pe=()=>{a.clearErrors(),a.starts_at||(a.starts_at=G()),U.value=!0},M=n=>Array.isArray(n?.permissions)?n.permissions:n?.permissions&&typeof n.permissions=="object"?Object.values(n.permissions):[],ce=n=>{m.clearErrors(),h.value=n,m.permissions=M(n).map(t=>t.code),E.value=!0};he(()=>a.contract_type,()=>{if(!a.permissions.length)return;const n=new Set(F.value.map(t=>t.code));a.permissions=a.permissions.filter(t=>n.has(t))});const ee=()=>{a.reset("login","user_id","name","contract_type","starts_at","ends_at","comment","permissions"),a.clearErrors(),_.value=[],k.value="",U.value=!1},te=()=>{m.reset("permissions"),m.clearErrors(),h.value=null,E.value=!1},xe=()=>{a.post(`/venues/${u.activeTypeSlug}/${u.venue?.alias}/contracts`,{preserveScroll:!0,onSuccess:()=>{a.reset("login","user_id","name","contract_type","starts_at","ends_at","comment","permissions"),_.value=[],k.value="",U.value=!1}})},be=()=>{!h.value||!u.venue?.alias||!u.activeTypeSlug||m.patch(`/venues/${u.activeTypeSlug}/${u.venue.alias}/contracts/${h.value.id}/permissions`,{preserveScroll:!0,onSuccess:()=>{h.value=null,E.value=!1}})},me=n=>{if(a.user_id="",k.value="",O&&clearTimeout(O),!n||n.trim().length<2){T.value=!1,_.value=[];return}O=setTimeout(()=>{ve(n.trim())},250)},ve=async n=>{const t=++N;T.value=!0;try{const s=await fetch(`/integrations/user-suggest?query=${encodeURIComponent(n)}`);if(!s.ok)throw new Error("failed");const v=await s.json();if(t!==N)return;_.value=v?.suggestions??[],k.value=_.value.length?"":"Варианты не найдены."}catch{if(t!==N)return;_.value=[],k.value="Не удалось получить подсказки."}finally{if(t!==N)return;T.value=!1}},fe=n=>{a.login=n.login,a.user_id=n.id,_.value=[],k.value=""},ge=n=>{n?.id&&J.post(`/venues/${u.activeTypeSlug}/${u.venue?.alias}/contracts/${n.id}/revoke`,{preserveScroll:!0})},se=n=>{p.clearErrors(),p.comment="",p.contract_type=n,A.value=n,D.value=!0},L=()=>{D.value=!1,A.value="",p.reset("contract_type","comment"),p.clearErrors()},ye=()=>{A.value&&p.post(`/venues/${u.activeTypeSlug}/${u.venue?.alias}/contracts/moderation`,{preserveScroll:!0,onSuccess:()=>{L()}})},re=n=>{if(!n)return"—";const t=new Date(n);return Number.isNaN(t.getTime())?n:t.toLocaleString("ru-RU")};return(n,t)=>(r(),l("div",qe,[t[35]||(t[35]=e("div",{class:"pointer-events-none absolute -left-28 top-12 h-72 w-72 rounded-full bg-emerald-200/70 blur-3xl"},null,-1)),t[36]||(t[36]=e("div",{class:"pointer-events-none absolute -right-24 -top-24 h-80 w-80 rounded-full bg-amber-200/70 blur-3xl"},null,-1)),B(Te,{success:oe.value,error:ne.value},null,8,["success","error"]),e("div",Ve,[B(je,{"app-name":y.appName,"is-authenticated":!!n.$page.props.auth?.user,"login-label":n.$page.props.auth?.user?.login},null,8,["app-name","is-authenticated","login-label"]),e("main",{class:f(["grid gap-6",{"lg:grid-cols-[240px_1fr]":W.value}])},[W.value?(r(),ke($e,{key:0,title:y.navigation.title,data:H.value,"active-href":y.activeHref},null,8,["title","data","active-href"])):d("",!0),e("div",Ue,[B(Se,{items:y.breadcrumbs},null,8,["items"]),e("div",Ee,[t[13]||(t[13]=e("div",null,[e("h1",{class:"text-3xl font-semibold text-slate-900"},"Контракты")],-1)),y.canAssignContracts&&P.value?(r(),l("button",{key:0,class:"rounded-full border border-slate-900 bg-slate-900 px-4 py-2 text-sm font-semibold text-white transition hover:-translate-y-0.5 hover:bg-slate-800",type:"button",onClick:pe}," Назначить контракт ")):d("",!0)]),e("div",Ae,[t[16]||(t[16]=e("div",{class:"flex flex-wrap items-center justify-between gap-3"},[e("h2",{class:"text-lg font-semibold text-slate-900"},"Запросы на контракты"),e("p",{class:"text-sm text-slate-500"}," Подайте заявку на владельца или супервайзера через модерацию. ")],-1)),e("div",Ne,[e("div",Re,[e("div",Be,[t[14]||(t[14]=e("div",null,[e("h3",{class:"text-sm font-semibold text-slate-900"},"Владелец"),e("p",{class:"text-xs text-slate-500"},"Юрлицо, подтверждающее право владения.")],-1)),q.value.has_active?(r(),l("span",Pe," Назначен ")):x.value?(r(),l("span",{key:1,class:f(["rounded-full border border-slate-200 bg-slate-100 px-2 py-0.5 text-xs font-semibold text-slate-600",{"border-amber-200 bg-amber-50 text-amber-800":x.value.status==="pending","border-emerald-200 bg-emerald-50 text-emerald-700":x.value.status==="approved","border-sky-200 bg-sky-50 text-sky-700":x.value.status==="clarification","border-rose-200 bg-rose-50 text-rose-700":x.value.status==="rejected"}])},i(Y[x.value.status]||"—"),3)):d("",!0)]),e("div",De,[x.value?.comment?(r(),l("div",Oe," Комментарий: "+i(x.value.comment),1)):d("",!0),x.value?.reject_reason?(r(),l("div",{key:1,class:f(x.value.status==="clarification"?"text-sky-700":"text-rose-700")},i(x.value.status==="clarification"?"Требуются уточнения":"Отклонено")+": "+i(x.value.reject_reason),3)):!x.value&&!q.value.can_request?(r(),l("div",Fe,i(q.value.reason),1)):d("",!0)]),!x.value&&q.value.can_request?(r(),l("button",{key:0,class:"mt-4 rounded-full border border-slate-900 bg-slate-900 px-4 py-2 text-xs font-semibold text-white transition hover:-translate-y-0.5 hover:bg-slate-800",type:"button",onClick:t[0]||(t[0]=s=>se("owner"))}," Запрос на владение ")):d("",!0)]),e("div",Me,[e("div",Le,[t[15]||(t[15]=e("div",null,[e("h3",{class:"text-sm font-semibold text-slate-900"},"Супервайзер"),e("p",{class:"text-xs text-slate-500"},"Агент, отвечающий за бронирования.")],-1)),V.value.has_active?(r(),l("span",ze," Назначен ")):b.value?(r(),l("span",{key:1,class:f(["rounded-full border border-slate-200 bg-slate-100 px-2 py-0.5 text-xs font-semibold text-slate-600",{"border-amber-200 bg-amber-50 text-amber-800":b.value.status==="pending","border-emerald-200 bg-emerald-50 text-emerald-700":b.value.status==="approved","border-sky-200 bg-sky-50 text-sky-700":b.value.status==="clarification","border-rose-200 bg-rose-50 text-rose-700":b.value.status==="rejected"}])},i(Y[b.value.status]||"—"),3)):d("",!0)]),e("div",Ie,[b.value?.comment?(r(),l("div",He," Комментарий: "+i(b.value.comment),1)):d("",!0),b.value?.reject_reason?(r(),l("div",{key:1,class:f(b.value.status==="clarification"?"text-sky-700":"text-rose-700")},i(b.value.status==="clarification"?"Требуются уточнения":"Отклонено")+": "+i(b.value.reject_reason),3)):!b.value&&!V.value.can_request?(r(),l("div",We,i(V.value.reason),1)):d("",!0)]),!b.value&&V.value.can_request?(r(),l("button",{key:0,class:"mt-4 rounded-full border border-slate-900 bg-slate-900 px-4 py-2 text-xs font-semibold text-white transition hover:-translate-y-0.5 hover:bg-slate-800",type:"button",onClick:t[1]||(t[1]=s=>se("supervisor"))}," Стать супервайзером ")):d("",!0)])])]),P.value?(r(),l("div",Ge,[ae.value?(r(),l("div",Je,[(r(!0),l(j,null,C(y.contracts,s=>(r(),l("article",{key:s.id,class:f(["rounded-2xl border bg-slate-50 p-4",s.is_current_user?"border-emerald-300":"border-slate-200"])},[e("div",Ke,[e("div",null,[e("h2",Qe,i(s.name||"Контракт"),1),e("p",Xe," Пользователь: "+i(s.user?.login||"—"),1)]),e("div",Ye,[e("span",{class:f(["rounded-full border border-slate-200 px-2 py-0.5 text-xs font-semibold uppercase tracking-[0.15em]",s.status==="active"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-slate-200 bg-slate-100 text-slate-600"])},i(s.status==="active"?"Активен":"Неактивен"),3),s.can_update_permissions&&s.status==="active"?(r(),l("button",{key:0,class:"rounded-full border border-slate-200 bg-white px-3 py-1 text-xs font-semibold text-slate-700 transition hover:-translate-y-0.5 hover:border-slate-300",type:"button",disabled:o(m).processing,onClick:v=>ce(s)}," Редактировать права ",8,Ze)):d("",!0),s.can_revoke&&s.status==="active"&&s.contract_type!=="creator"?(r(),l("button",{key:1,class:"rounded-full border border-rose-300 bg-rose-50 px-3 py-1 text-xs font-semibold text-rose-700 transition hover:-translate-y-0.5 hover:border-rose-400",type:"button",disabled:o(J).processing,onClick:v=>ge(s)}," Аннулировать ",8,et)):d("",!0)])]),e("div",tt,[e("div",st,[t[17]||(t[17]=e("span",{class:"text-xs uppercase tracking-[0.15em] text-slate-500"},"Тип",-1)),e("span",null,i(ue(s.contract_type)),1)]),e("div",rt,[t[18]||(t[18]=e("span",{class:"text-xs uppercase tracking-[0.15em] text-slate-500"},"Начало",-1)),e("span",null,i(re(s.starts_at)),1)]),e("div",lt,[t[19]||(t[19]=e("span",{class:"text-xs uppercase tracking-[0.15em] text-slate-500"},"Окончание",-1)),e("span",null,i(re(s.ends_at)),1)]),s.comment?(r(),l("div",at,[t[20]||(t[20]=e("span",{class:"text-xs uppercase tracking-[0.15em] text-slate-500"},"Комментарий",-1)),e("span",ot,i(s.comment),1)])):d("",!0)]),e("div",nt,[t[21]||(t[21]=e("p",{class:"text-xs uppercase tracking-[0.15em] text-slate-500"},"Права",-1)),M(s).length?(r(),l("div",it,[(r(!0),l(j,null,C(M(s),v=>(r(),l("span",{key:v.code,class:"rounded-full border border-slate-200 bg-white px-3 py-1 text-xs text-slate-600"},i(v.label),1))),128))])):(r(),l("p",dt,"Права не назначены."))])],2))),128))])):(r(),l("div",ut," Контракты не найдены. "))])):d("",!0)])],2),B(Ce,{"app-name":y.appName},null,8,["app-name"])]),E.value?(r(),l("div",pt,[e("div",ct,[e("form",{class:f({loading:o(m).processing}),onSubmit:z(be,["prevent"])},[e("div",{class:"popup-header flex items-center justify-between border-b border-slate-200/80 px-6 py-4"},[t[22]||(t[22]=e("h2",{class:"text-lg font-semibold text-slate-900"},"Редактировать права",-1)),e("button",{class:"rounded-full border border-slate-200 px-2.5 py-1 text-sm text-slate-500 transition hover:border-slate-300 hover:text-slate-700",type:"button","aria-label":"Закрыть",onClick:te}," x ")]),e("div",xt,[e("p",bt," Права для контракта: "+i(h.value?.name||"Контракт"),1),e("div",mt,[t[23]||(t[23]=e("div",{class:"text-xs uppercase tracking-[0.15em] text-slate-500"},"Права",-1)),e("div",vt,[Q.value.length?(r(),l("div",ft,[(r(!0),l(j,null,C(Q.value,s=>(r(),l("label",{key:s.code,class:"flex items-center gap-2"},[g(e("input",{"onUpdate:modelValue":t[2]||(t[2]=v=>o(m).permissions=v),value:s.code,type:"checkbox",class:"h-4 w-4 rounded border-slate-300 text-slate-900"},null,8,gt),[[le,o(m).permissions]]),e("span",null,i(s.label),1)]))),128))])):(r(),l("p",yt,"Нет доступных прав для редактирования."))]),o(m).errors.permissions?(r(),l("div",_t,i(o(m).errors.permissions),1)):d("",!0)])]),e("div",ht,[e("button",{class:"rounded-full border border-slate-200 px-4 py-2 text-sm text-slate-600 transition hover:-translate-y-0.5 hover:border-slate-300",type:"button",disabled:o(m).processing,onClick:te}," Закрыть ",8,kt),e("button",{class:"rounded-full border border-slate-900 bg-slate-900 px-4 py-2 text-sm font-semibold text-white transition hover:-translate-y-0.5 hover:bg-slate-800 disabled:cursor-not-allowed disabled:border-slate-300 disabled:bg-slate-200 disabled:text-slate-500 disabled:hover:translate-y-0",type:"submit",disabled:de.value}," Сохранить ",8,wt)])],34)])])):d("",!0),U.value?(r(),l("div",St,[e("div",jt,[e("form",{class:f({loading:o(a).processing}),onSubmit:z(xe,["prevent"])},[e("div",{class:"popup-header flex items-center justify-between border-b border-slate-200/80 px-6 py-4"},[t[24]||(t[24]=e("h2",{class:"text-lg font-semibold text-slate-900"},"Назначить контракт",-1)),e("button",{class:"rounded-full border border-slate-200 px-2.5 py-1 text-sm text-slate-500 transition hover:border-slate-300 hover:text-slate-700",type:"button","aria-label":"Закрыть",onClick:ee}," x ")]),e("div",Ct,[t[33]||(t[33]=e("p",{class:"text-sm text-slate-600"}," Укажите пользователя, тип контракта и права для данной площадки. ",-1)),e("div",$t,[e("div",Tt,[e("label",qt,[t[25]||(t[25]=$(" Логин пользователя ",-1)),g(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>o(a).login=s),class:f(["input-predictive rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700",{"is-loading":T.value}]),type:"text",placeholder:"login",onInput:t[4]||(t[4]=s=>me(s.target.value))},null,34),[[S,o(a).login]])]),g(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>o(a).user_id=s),type:"hidden"},null,512),[[S,o(a).user_id]]),o(a).errors.login?(r(),l("div",Vt,i(o(a).errors.login),1)):d("",!0),o(a).errors.user_id?(r(),l("div",Ut,i(o(a).errors.user_id),1)):d("",!0),k.value?(r(),l("div",Et,i(k.value),1)):!T.value&&_.value.length?(r(),l("div",At,[(r(!0),l(j,null,C(_.value,(s,v)=>(r(),l("button",{key:`${s.id}-${v}`,class:"flex w-full items-start gap-2 border-b border-slate-100 px-3 py-2 text-left last:border-b-0 hover:bg-slate-50",type:"button",onClick:ds=>fe(s)},[e("span",Rt,i(s.login),1),s.email?(r(),l("span",Bt,i(s.email),1)):d("",!0)],8,Nt))),128))])):d("",!0)]),e("label",Pt,[t[27]||(t[27]=$(" Тип контракта ",-1)),g(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>o(a).contract_type=s),class:"rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700"},[t[26]||(t[26]=e("option",{value:""},"Выберите тип",-1)),(r(!0),l(j,null,C(y.contractTypes.filter(s=>s.value!=="creator"),s=>(r(),l("option",{key:s.value,value:s.value},i(s.label),9,Dt))),128))],512),[[we,o(a).contract_type]])]),o(a).errors.contract_type?(r(),l("div",Ot,i(o(a).errors.contract_type),1)):d("",!0),e("label",Ft,[t[28]||(t[28]=$(" Название (опционально) ",-1)),g(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>o(a).name=s),class:"rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700",type:"text",placeholder:"Например, Менеджер смены"},null,512),[[S,o(a).name]])]),e("div",Mt,[e("label",Lt,[t[29]||(t[29]=$(" Начало ",-1)),g(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>o(a).starts_at=s),class:"rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700",type:"date"},null,512),[[S,o(a).starts_at]])]),e("label",zt,[t[30]||(t[30]=$(" Окончание ",-1)),g(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>o(a).ends_at=s),class:"rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700",type:"date"},null,512),[[S,o(a).ends_at]])])]),o(a).errors.starts_at||o(a).errors.ends_at?(r(),l("div",It,i(o(a).errors.starts_at||o(a).errors.ends_at),1)):d("",!0),e("label",Ht,[t[31]||(t[31]=$(" Комментарий ",-1)),g(e("textarea",{"onUpdate:modelValue":t[10]||(t[10]=s=>o(a).comment=s),class:"min-h-[96px] rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700"},null,512),[[S,o(a).comment]])]),e("div",null,[t[32]||(t[32]=e("p",{class:"text-xs uppercase tracking-[0.15em] text-slate-500"},"Права",-1)),F.value.length?(r(),l("div",Wt,[(r(!0),l(j,null,C(F.value,s=>(r(),l("label",{key:s.code,class:"flex items-start gap-2 text-sm text-slate-700"},[g(e("input",{"onUpdate:modelValue":t[11]||(t[11]=v=>o(a).permissions=v),type:"checkbox",class:"mt-1 h-4 w-4 rounded border-slate-300 text-emerald-600 focus:ring-emerald-300",value:s.code},null,8,Gt),[[le,o(a).permissions]]),e("span",null,i(s.label),1)]))),128))])):(r(),l("p",Jt,"Список прав пуст.")),o(a).errors.permissions?(r(),l("div",Kt,i(o(a).errors.permissions),1)):d("",!0)])])]),e("div",Qt,[e("button",{class:"rounded-full border border-slate-200 px-4 py-2 text-sm text-slate-600 transition hover:-translate-y-0.5 hover:border-slate-300",type:"button",disabled:o(a).processing,onClick:ee}," Закрыть ",8,Xt),e("button",{class:"rounded-full border border-slate-900 bg-slate-900 px-4 py-2 text-sm font-semibold text-white transition hover:-translate-y-0.5 hover:bg-slate-800 disabled:cursor-not-allowed disabled:border-slate-300 disabled:bg-slate-200 disabled:text-slate-500 disabled:hover:translate-y-0",type:"submit",disabled:ie.value}," Назначить ",8,Yt)])],34)])])):d("",!0),D.value?(r(),l("div",Zt,[e("div",es,[e("form",{class:f({loading:o(p).processing}),onSubmit:z(ye,["prevent"])},[e("div",ts,[e("h2",ss," Запросить "+i(X[A.value]||"контракт"),1),e("button",{class:"rounded-full border border-slate-200 px-2.5 py-1 text-sm text-slate-500 transition hover:border-slate-300 hover:text-slate-700",type:"button","aria-label":"Закрыть",onClick:L}," x ")]),e("div",rs,[t[34]||(t[34]=e("p",{class:"text-sm text-slate-600"}," Добавьте комментарий для модерации (необязательно). ",-1)),g(e("textarea",{"onUpdate:modelValue":t[12]||(t[12]=s=>o(p).comment=s),class:"mt-4 min-h-[120px] w-full rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-sm text-slate-700 focus:border-slate-400 focus:outline-none",placeholder:"Комментарий"},null,512),[[S,o(p).comment]]),o(p).errors.comment?(r(),l("div",ls,i(o(p).errors.comment),1)):d("",!0),o(p).errors.contract_type?(r(),l("div",as,i(o(p).errors.contract_type),1)):d("",!0)]),e("div",os,[e("button",{class:"rounded-full border border-slate-200 px-4 py-2 text-sm text-slate-600 transition hover:-translate-y-0.5 hover:border-slate-300",type:"button",disabled:o(p).processing,onClick:L}," Закрыть ",8,ns),e("button",{class:"rounded-full border border-slate-900 bg-slate-900 px-4 py-2 text-sm font-semibold text-white transition hover:-translate-y-0.5 hover:bg-slate-800 disabled:cursor-not-allowed disabled:border-slate-300 disabled:bg-slate-200 disabled:text-slate-500 disabled:hover:translate-y-0",type:"submit",disabled:o(p).processing}," Отправить запрос ",8,is)])],34)])])):d("",!0)]))}};export{ms as default};
