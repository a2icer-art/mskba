import{b as a,o as t,d as e,f as g,t as i,g as C,e as d,y as m,m as $,h as b,z as x,u as W,q as J,s as X,r as v,c as w,p as Z,D as ee,E as T,F as _,i as S,n as k}from"./app-BG8bJDk_.js";const te={class:"flex h-11 w-11 items-center justify-center"},se=["src","alt"],V={__name:"BrandLogo",props:{src:{type:String,default:"/images/logo-header.png"},alt:{type:String,default:"MSKBA"}},setup(o){return(c,l)=>(t(),a("div",te,[e("img",{class:"object-contain",src:o.src,alt:o.alt},null,8,se)]))}},re={class:"flex flex-col gap-4 border-t border-slate-200/80 pt-6 sm:flex-row sm:items-center sm:justify-between"},ae={class:"flex items-center gap-3 text-sm text-slate-600"},Be={__name:"MainFooter",props:{appName:{type:String,default:""}},setup(o){return(c,l)=>(t(),a("footer",re,[e("div",ae,[g(V),e("span",null,i(o.appName)+" • Баскетбольный портал",1)]),l[0]||(l[0]=e("nav",{class:"flex flex-wrap items-center gap-4 text-sm font-medium text-slate-600"},[e("a",{class:"transition hover:text-slate-900",href:"#"},"О проекте"),e("a",{class:"transition hover:text-slate-900",href:"#"},"Правила"),e("a",{class:"transition hover:text-slate-900",href:"#"},"Контакты")],-1))]))}},le={class:"flex flex-wrap items-center gap-3 text-sm font-medium text-slate-700"},K={__name:"MainHeaderNav",props:{showControlPanel:{type:Boolean,default:!1}},setup(o){return(c,l)=>(t(),a("nav",le,[g(b(x),{class:"rounded-full border border-slate-200 bg-white/80 px-4 py-2 transition hover:-translate-y-0.5 hover:border-slate-300",href:"/venues"},{default:m(()=>[...l[0]||(l[0]=[$(" Площадки ",-1)])]),_:1}),g(b(x),{class:"rounded-full border border-slate-200 bg-white/80 px-4 py-2 transition hover:-translate-y-0.5 hover:border-slate-300",href:"/events"},{default:m(()=>[...l[1]||(l[1]=[$(" События ",-1)])]),_:1}),l[3]||(l[3]=e("a",{class:"rounded-full border border-slate-200 bg-white/80 px-4 py-2 transition hover:-translate-y-0.5 hover:border-slate-300",href:"#"}," Турниры ",-1)),l[4]||(l[4]=e("a",{class:"rounded-full border border-slate-200 bg-white/80 px-4 py-2 transition hover:-translate-y-0.5 hover:border-slate-300",href:"#"}," Сообщество ",-1)),o.showControlPanel?(t(),C(b(x),{key:0,class:"rounded-full border border-blue-200 bg-blue-50 px-4 py-2 text-blue-700 transition hover:-translate-y-0.5 hover:border-blue-300",href:"/admin"},{default:m(()=>[...l[2]||(l[2]=[$(" Панель управления ",-1)])]),_:1})):d("",!0)]))}},ne=v(0),oe=(o={})=>{const c=W(),l=ne,M=o.enabled??!0,y=o.userId??c.props?.auth?.user?.id??null,E=o.onEvent;let h=!1;const u=()=>{const f=c.props?.messageCounters?.unread_messages;Number.isFinite(Number(f))&&(l.value=Number(f))},j=f=>{Number.isFinite(Number(f?.unread_messages))&&(l.value=Number(f.unread_messages)),E&&E(f)},A=()=>{if(!M||!y||!window.Echo||h)return;h=!0;const f=`user.${y}`;window.Echo.private(f).listen(".messages.created",j).listen(".messages.read",j)},F=()=>{!window.Echo||!h||!y||(window.Echo.leave(`user.${y}`),h=!1)};return J(()=>{u(),A()}),X(()=>{F()}),{unreadCount:l,syncFromPage:u}},ie={key:0,class:"w-full"},ue={class:"flex w-full items-center justify-between gap-4"},de={class:"text-lg font-semibold"},ce={class:"flex items-center gap-3"},fe={key:0,class:"absolute -right-1 -top-1 flex h-5 min-w-[20px] items-center justify-center rounded-full bg-rose-500 px-1 text-[10px] font-semibold text-white"},pe={key:0,class:"mt-4 flex flex-col gap-2 sm:hidden"},be={key:0,class:"mt-3 border-t border-slate-200/80 pt-3"},he=["aria-expanded"],me={key:0,class:"mt-2 space-y-3"},xe={key:0,class:"text-[10px] font-semibold uppercase tracking-[0.2em] text-slate-400"},ve={class:"flex flex-col gap-2"},ge={key:0,class:"inline-flex h-5 min-w-[20px] items-center justify-center rounded-full bg-rose-500 px-1 text-[10px] font-semibold text-white"},ye={class:"flex w-full items-center justify-between gap-4"},we={class:"text-lg font-semibold"},_e={class:"flex items-center gap-3"},ke={key:0,class:"absolute -right-1 -top-1 flex h-5 min-w-[20px] items-center justify-center rounded-full bg-rose-500 px-1 text-[10px] font-semibold text-white"},Ce={key:0,class:"mt-4 flex flex-col gap-2 sm:hidden"},$e={key:0,class:"mt-3 border-t border-slate-200/80 pt-3"},Ae=["aria-expanded"],Ne={key:0,class:"mt-2 space-y-3"},Se={key:0,class:"text-[10px] font-semibold uppercase tracking-[0.2em] text-slate-400"},Ee={class:"flex flex-col gap-2"},je={key:0,class:"inline-flex h-5 min-w-[20px] items-center justify-center rounded-full bg-rose-500 px-1 text-[10px] font-semibold text-white"},O=0,He={__name:"MainHeader",props:{appName:{type:String,required:!0},isAuthenticated:{type:Boolean,default:!1},loginLabel:{type:String,default:""},sidebarTitle:{type:String,default:""},sidebarItems:{type:Array,default:()=>[]},sidebarActiveHref:{type:String,default:""}},emits:["open-login"],setup(o){const c=o,l=W(),M=w(()=>Number(l.props.auth?.user?.role_level??0)),y=w(()=>c.isAuthenticated&&M.value>10),E=w(()=>{const r=[{label:"Площадки",href:"/venues"},{label:"События",href:"/events"},{label:"Турниры",href:"#"},{label:"Сообщество",href:"#"}];return y.value&&r.push({label:"Панель управления",href:"/admin",variant:"admin"}),r}),h=v(!1),u=v(!1),j=()=>{h.value=!h.value,h.value||(u.value=!1)},A=()=>{h.value=!1,u.value=!1},{unreadCount:F}=oe({enabled:c.isAuthenticated}),f=w(()=>{if(!c.isAuthenticated)return"";const r=Number(F.value??0);return r<=0?"":r>9?"…":String(r)}),Q=w(()=>{if(Array.isArray(c.sidebarItems)&&c.sidebarItems.length>0)return c.sidebarItems;const r=l.props?.navigation;return Array.isArray(r?.data)?r.data:Array.isArray(r?.items)?r.items:[]}),z=w(()=>{const r=Q.value;return r.length?r.some(s=>Array.isArray(s?.items))?r.filter(s=>Array.isArray(s?.items)&&s.items.length>0).map(s=>({title:s?.title??"",items:s.items})):[{title:"",items:r}]:[]}),G=w(()=>z.value.length>0),U=w(()=>c.sidebarTitle||l.props?.navigation?.title||"Навигация"),B=r=>{if(r==null||r==="")return"";const n=Number(r);return Number.isFinite(n)?n<=0?"":n>9?"…":String(n):String(r)},R=v(null),H=v(null),I=v(0),q=v(0),D=v(0),Y=v(0),N=v(!1),P=()=>{if(!H.value||!R.value)return;const r=R.value.getBoundingClientRect(),n=H.value.getBoundingClientRect();I.value=n.height||0,q.value=r.left||0,D.value=r.width||0,N.value||(Y.value=window.scrollY+r.top),document.documentElement.style.setProperty("--app-header-height",`${I.value}px`),document.documentElement.style.setProperty("--app-header-offset",`${I.value+O}px`)},L=()=>{H.value&&(N.value=window.scrollY>=Y.value-O)};return J(()=>{Z(()=>{P(),L()}),window.addEventListener("resize",P),window.addEventListener("resize",L),window.addEventListener("scroll",L,{passive:!0})}),ee(()=>{window.removeEventListener("resize",P),window.removeEventListener("resize",L),window.removeEventListener("scroll",L)}),(r,n)=>(t(),a("div",{ref_key:"wrapperRef",ref:R},[N.value?(t(),a("div",{key:0,style:T({height:`${I.value}px`})},null,4)):d("",!0),e("header",{ref_key:"headerRef",ref:H,class:k(["flex flex-col gap-6 rounded-3xl border border-amber-200/80 bg-white/70 backdrop-blur sm:flex-row sm:items-center sm:justify-between",N.value?"fixed z-40 w-full rounded-none border-transparent bg-white/70 backdrop-blur shadow-[0_6px_18px_rgba(15,23,42,0.08)]":"relative px-6 py-5"]),style:T(N.value?{top:`${O}px`,left:"0px",right:"0px"}:{})},[N.value?(t(),a("div",ie,[e("div",{class:"flex flex-col gap-4 rounded-3xl px-6 py-5",style:T({width:`${D.value}px`,marginLeft:`${q.value}px`})},[e("div",ue,[g(b(x),{class:"flex items-center gap-3",href:"/","aria-label":"Home"},{default:m(()=>[g(V),e("div",null,[n[4]||(n[4]=e("p",{class:"hidden text-xs uppercase tracking-[0.25em] text-slate-500 sm:block"},"Баскетбольный портал",-1)),e("p",de,i(o.appName),1)])]),_:1}),e("div",ce,[g(K,{class:"hidden sm:flex","show-control-panel":y.value},null,8,["show-control-panel"]),o.isAuthenticated?(t(),C(b(x),{key:0,class:"relative rounded-full bg-slate-900 px-4 py-2 text-sm font-medium text-white transition hover:-translate-y-0.5 hover:bg-slate-800",href:"/account"},{default:m(()=>[$(i(o.loginLabel||"login")+" ",1),f.value?(t(),a("span",fe,i(f.value),1)):d("",!0)]),_:1})):(t(),a("button",{key:1,class:"rounded-full bg-slate-900 px-4 py-2 text-sm font-medium text-white transition hover:-translate-y-0.5 hover:bg-slate-800",type:"button",onClick:n[0]||(n[0]=s=>r.$emit("open-login"))}," Аккаунт ")),e("button",{class:"flex h-10 w-10 items-center justify-center rounded-full border border-slate-200 bg-white/80 text-slate-600 transition hover:-translate-y-0.5 hover:border-slate-300 sm:hidden",type:"button","aria-label":"Открыть меню",onClick:j},[...n[5]||(n[5]=[e("span",{class:"flex flex-col gap-1"},[e("span",{class:"h-0.5 w-4 rounded-full bg-slate-600"}),e("span",{class:"h-0.5 w-4 rounded-full bg-slate-600"}),e("span",{class:"h-0.5 w-4 rounded-full bg-slate-600"})],-1)])])])]),h.value?(t(),a("div",pe,[(t(!0),a(_,null,S(E.value,s=>(t(),C(b(x),{key:s.href,href:s.href,class:k(["rounded-2xl border border-slate-200 bg-white/80 px-4 py-2 text-sm font-medium text-slate-700 transition hover:-translate-y-0.5 hover:border-slate-300",s.variant==="admin"?"border-blue-200 bg-blue-50 text-blue-700":""]),onClick:A},{default:m(()=>[$(i(s.label),1)]),_:2},1032,["href","class"]))),128)),G.value?(t(),a("div",be,[e("button",{class:"flex w-full items-center justify-between gap-3 text-[10px] font-semibold uppercase tracking-[0.2em] text-slate-400",type:"button","aria-expanded":u.value,onClick:n[1]||(n[1]=s=>u.value=!u.value)},[e("span",null,i(U.value),1),e("span",{class:k(["text-xs transition",u.value?"rotate-180":"rotate-0"])},"▾",2)],8,he),u.value?(t(),a("div",me,[(t(!0),a(_,null,S(z.value,s=>(t(),a("div",{key:s.title||s.items[0]?.href,class:"space-y-2"},[s.title?(t(),a("p",xe,i(s.title),1)):d("",!0),e("div",ve,[(t(!0),a(_,null,S(s.items,p=>(t(),C(b(x),{key:p.href,href:p.href,class:k(["flex items-center justify-between gap-3 rounded-2xl border px-4 py-2 text-sm font-medium transition",p.href===(o.sidebarActiveHref||b(l).url)?"border-slate-900 bg-slate-900 text-white":"border-slate-200 bg-white/80 text-slate-700 hover:border-slate-300"]),onClick:A},{default:m(()=>[e("span",null,i(p.label),1),B(p.badge)?(t(),a("span",ge,i(B(p.badge)),1)):d("",!0)]),_:2},1032,["href","class"]))),128))])]))),128))])):d("",!0)])):d("",!0)])):d("",!0)],4)])):(t(),a(_,{key:1},[e("div",ye,[g(b(x),{class:"flex items-center gap-3",href:"/","aria-label":"Home"},{default:m(()=>[g(V),e("div",null,[n[6]||(n[6]=e("p",{class:"hidden text-xs uppercase tracking-[0.25em] text-slate-500 sm:block"},"Баскетбольный портал",-1)),e("p",we,i(o.appName),1)])]),_:1}),e("div",_e,[g(K,{class:"hidden sm:flex","show-control-panel":y.value},null,8,["show-control-panel"]),o.isAuthenticated?(t(),C(b(x),{key:0,class:"relative rounded-full bg-slate-900 px-4 py-2 text-sm font-medium text-white transition hover:-translate-y-0.5 hover:bg-slate-800",href:"/account"},{default:m(()=>[$(i(o.loginLabel||"login")+" ",1),f.value?(t(),a("span",ke,i(f.value),1)):d("",!0)]),_:1})):(t(),a("button",{key:1,class:"rounded-full bg-slate-900 px-4 py-2 text-sm font-medium text-white transition hover:-translate-y-0.5 hover:bg-slate-800",type:"button",onClick:n[2]||(n[2]=s=>r.$emit("open-login"))}," Аккаунт ")),e("button",{class:"flex h-10 w-10 items-center justify-center rounded-full border border-slate-200 bg-white/80 text-slate-600 transition hover:-translate-y-0.5 hover:border-slate-300 sm:hidden",type:"button","aria-label":"Открыть меню",onClick:j},[...n[7]||(n[7]=[e("span",{class:"flex flex-col gap-1"},[e("span",{class:"h-0.5 w-4 rounded-full bg-slate-600"}),e("span",{class:"h-0.5 w-4 rounded-full bg-slate-600"}),e("span",{class:"h-0.5 w-4 rounded-full bg-slate-600"})],-1)])])])]),h.value?(t(),a("div",Ce,[(t(!0),a(_,null,S(E.value,s=>(t(),C(b(x),{key:s.href,href:s.href,class:k(["rounded-2xl border border-slate-200 bg-white/80 px-4 py-2 text-sm font-medium text-slate-700 transition hover:-translate-y-0.5 hover:border-slate-300",s.variant==="admin"?"border-blue-200 bg-blue-50 text-blue-700":""]),onClick:A},{default:m(()=>[$(i(s.label),1)]),_:2},1032,["href","class"]))),128)),G.value?(t(),a("div",$e,[e("button",{class:"flex w-full items-center justify-between gap-3 text-[10px] font-semibold uppercase tracking-[0.2em] text-slate-400",type:"button","aria-expanded":u.value,onClick:n[3]||(n[3]=s=>u.value=!u.value)},[e("span",null,i(U.value),1),e("span",{class:k(["text-xs transition",u.value?"rotate-180":"rotate-0"])},"▾",2)],8,Ae),u.value?(t(),a("div",Ne,[(t(!0),a(_,null,S(z.value,s=>(t(),a("div",{key:s.title||s.items[0]?.href,class:"space-y-2"},[s.title?(t(),a("p",Se,i(s.title),1)):d("",!0),e("div",Ee,[(t(!0),a(_,null,S(s.items,p=>(t(),C(b(x),{key:p.href,href:p.href,class:k(["flex items-center justify-between gap-3 rounded-2xl border px-4 py-2 text-sm font-medium transition",p.href===(o.sidebarActiveHref||b(l).url)?"border-slate-900 bg-slate-900 text-white":"border-slate-200 bg-white/80 text-slate-700 hover:border-slate-300"]),onClick:A},{default:m(()=>[e("span",null,i(p.label),1),B(p.badge)?(t(),a("span",je,i(B(p.badge)),1)):d("",!0)]),_:2},1032,["href","class"]))),128))])]))),128))])):d("",!0)])):d("",!0)])):d("",!0)],64))],6)],512))}};export{He as _,Be as a,oe as u};
