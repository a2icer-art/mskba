import{u as D,c as u,r as g,q as R,b as o,d as t,f as n,e as i,F as _,i as E,o as l,y as h,m as y,t as p,h as v,z as k}from"./app-BG8bJDk_.js";import{_ as U}from"./Breadcrumbs-BJkTr2TQ.js";import{_ as V}from"./EventCreateModal-CbqUTWpy.js";import{_ as P,a as j}from"./MainHeader-CSzL04-A.js";import{_ as F}from"./SystemNoticeStack-D6BD3byq.js";const q={class:"relative min-h-screen overflow-hidden bg-[#f7f1e6] text-slate-900"},z={class:"relative mx-auto flex max-w-[1360px] flex-col gap-8 px-6 py-8"},M={class:"grid gap-6"},O={class:"rounded-3xl border border-slate-200/80 bg-white/90 p-6 shadow-sm page-content-wrapper"},G={class:"flex flex-wrap items-center justify-between gap-4"},H={key:0,class:"mt-6 rounded-2xl border border-dashed border-slate-200 bg-white px-4 py-6 text-sm text-slate-500"},I={key:1,class:"mt-6 grid gap-4"},J={class:"flex flex-wrap items-center justify-between gap-4"},K={class:"text-lg font-semibold text-slate-900"},Q={class:"mt-1 text-sm text-slate-600"},W={class:"mt-2 flex flex-wrap gap-2 text-xs"},X={key:0,class:"flex items-center rounded-full border border-amber-200 bg-amber-50 px-2 py-0.5 text-amber-700",title:"Есть бронирования в ожидании"},Y={key:1,class:"flex items-center rounded-full border border-indigo-200 bg-indigo-50 px-2 py-0.5 text-indigo-700",title:"Есть бронирования в ожидании оплаты"},Z={key:2,class:"flex items-center rounded-full border border-sky-200 bg-sky-50 px-2 py-0.5 text-sky-700",title:"Есть оплаченные бронирования"},A={key:3,class:"flex items-center rounded-full border border-emerald-200 bg-emerald-50 px-2 py-0.5 text-emerald-700",title:"Есть подтвержденные бронирования"},ee={key:4,class:"flex items-center rounded-full border border-rose-200 bg-rose-50 px-2 py-0.5 text-rose-700",title:"Есть отмененные бронирования"},te={class:"mt-3 text-sm text-slate-700"},se={class:"mt-1"},ie={__name:"Events",props:{appName:{type:String,default:"Laravel"},events:{type:Array,default:()=>[]},canCreate:{type:Boolean,default:!1},canBook:{type:Boolean,default:!1},breadcrumbs:{type:Array,default:()=>[]}},setup(r){const c=r,m=D(),w=u(()=>m.props?.flash?.notice??""),N=u(()=>m.props?.errors?.event??""),$=u(()=>c.events.length>0),d=g(!1),f=g({}),b=(a={})=>{f.value=a,d.value=!0},B=()=>{d.value=!1};R(()=>{const a=new URLSearchParams(window.location.search),e=a.get("venue"),s=a.get("date");(e||s)&&b({venue:e||"",date:s||""})});const C=(a,e)=>{if(!a||!e)return"—";const s=new Date(a),x=new Date(e);if(Number.isNaN(s.getTime())||Number.isNaN(x.getTime()))return`${a} – ${e}`;const L=s.toLocaleDateString("ru-RU"),T=s.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}),S=x.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"});return`${L}, ${T} – ${S}`};return(a,e)=>(l(),o(_,null,[t("div",q,[e[8]||(e[8]=t("div",{class:"pointer-events-none absolute -left-28 top-12 h-72 w-72 rounded-full bg-emerald-200/70 blur-3xl"},null,-1)),e[9]||(e[9]=t("div",{class:"pointer-events-none absolute -right-24 -top-24 h-80 w-80 rounded-full bg-amber-200/70 blur-3xl"},null,-1)),n(F,{success:w.value,error:N.value},null,8,["success","error"]),t("div",z,[n(P,{"app-name":r.appName,"is-authenticated":!!a.$page.props.auth?.user,"login-label":a.$page.props.auth?.user?.login},null,8,["app-name","is-authenticated","login-label"]),t("main",M,[t("div",O,[n(U,{items:r.breadcrumbs},null,8,["items"]),t("div",G,[e[0]||(e[0]=t("div",null,[t("h1",{class:"text-3xl font-semibold text-slate-900"},"События"),t("p",{class:"mt-2 text-sm text-slate-600"}," Игры, тренировки и игровые тренировки. ")],-1)),r.canCreate?(l(),o("button",{key:0,class:"rounded-full border border-slate-900 bg-slate-900 px-4 py-2 text-sm font-semibold text-white transition hover:-translate-y-0.5 hover:bg-slate-800",type:"button",onClick:b}," Создать событие ")):i("",!0)]),$.value?(l(),o("div",I,[(l(!0),o(_,null,E(r.events,s=>(l(),o("article",{key:s.id,class:"rounded-2xl border border-slate-200 bg-white px-5 py-4"},[t("div",J,[t("div",null,[t("h2",K,[n(v(k),{class:"transition hover:text-slate-700",href:`/events/${s.id}`},{default:h(()=>[y(p(s.title),1)]),_:2},1032,["href"])]),t("div",Q,p(s.type?.label||"Тип не задан"),1),t("div",W,[s.has_pending_booking?(l(),o("span",X,[...e[1]||(e[1]=[t("span",{class:"text-sm leading-none"},"•",-1)])])):i("",!0),s.has_awaiting_payment_booking?(l(),o("span",Y,[...e[2]||(e[2]=[t("span",{class:"text-sm leading-none"},"◇",-1)])])):i("",!0),s.has_paid_booking?(l(),o("span",Z,[...e[3]||(e[3]=[t("span",{class:"text-sm leading-none"},"◆",-1)])])):i("",!0),s.has_approved_booking?(l(),o("span",A,[...e[4]||(e[4]=[t("span",{class:"text-sm leading-none"},"✓",-1)])])):i("",!0),s.has_cancelled_booking?(l(),o("span",ee,[...e[5]||(e[5]=[t("span",{class:"text-sm leading-none"},"✕",-1)])])):i("",!0)])]),n(v(k),{class:"rounded-full border border-slate-200 bg-white px-3 py-1 text-xs font-semibold text-slate-700 transition hover:-translate-y-0.5",href:`/events/${s.id}`},{default:h(()=>[...e[6]||(e[6]=[y(" Открыть ",-1)])]),_:1},8,["href"])]),t("div",te,[e[7]||(e[7]=t("span",{class:"text-xs uppercase tracking-[0.15em] text-slate-500"},"Время",-1)),t("div",se,p(C(s.starts_at,s.ends_at)),1)])]))),128))])):(l(),o("div",H," События пока не созданы. "))])]),n(j,{"app-name":r.appName},null,8,["app-name"])])]),n(V,{"is-open":d.value,prefill:f.value,"can-book-fallback":c.canBook,onClose:B},null,8,["is-open","prefill","can-book-fallback"])],64))}};export{ie as default};
