import{c as l,u as ve,r,a as ge,b as p,d as t,f as R,n as xe,g as be,e as m,l as _e,j as o,B,k,t as v,v as K,h as W,F as ce,i as fe,o as d}from"./app-BG8bJDk_.js";import{_ as ye}from"./Breadcrumbs-BJkTr2TQ.js";import{_ as ke,a as we}from"./MainHeader-CSzL04-A.js";import{_ as Ne}from"./MainSidebar-Gh5823Zl.js";import{_ as Ve}from"./SystemNoticeStack-D6BD3byq.js";const Se={class:"relative min-h-screen overflow-hidden bg-[#f7f1e6] text-slate-900"},Me={class:"relative mx-auto flex max-w-[1360px] flex-col gap-8 px-6 py-8"},Fe={class:"rounded-3xl border border-slate-200/80 bg-white/90 p-6 shadow-sm page-content-wrapper"},Ue={class:"mt-6 rounded-2xl border border-slate-200 bg-white px-4 py-6"},Be={class:"space-y-4"},We={class:"grid gap-4 md:grid-cols-2"},Pe={class:"grid gap-2"},$e={class:"flex items-center gap-2 text-xs font-semibold uppercase tracking-[0.15em] text-slate-500"},Oe=["step","max"],Le={key:0,class:"text-xs text-rose-700"},je={class:"grid gap-2"},De={class:"flex items-center gap-2 text-xs font-semibold uppercase tracking-[0.15em] text-slate-500"},Ie=["step","max"],Re={key:0,class:"text-xs text-rose-700"},Ce={class:"space-y-4"},Ee={class:"grid gap-4 md:grid-cols-2"},Te={class:"grid gap-2"},Ae=["value"],He={key:0,class:"text-xs text-rose-700"},he={class:"grid gap-2"},qe={key:0,class:"text-xs text-rose-700"},ze={class:"grid gap-4 md:grid-cols-2"},Ge={class:"grid gap-2"},Je={class:"flex items-center gap-2 text-xs font-semibold uppercase tracking-[0.15em] text-slate-500"},Ke=["step","max"],Qe={key:0,class:"text-xs text-rose-700"},Xe={class:"space-y-4"},Ye={class:"grid gap-4 md:grid-cols-2"},Ze={class:"grid gap-2"},et={class:"flex items-center gap-2 text-xs font-semibold uppercase tracking-[0.15em] text-slate-500"},tt=["step","max"],st={key:0,class:"text-xs text-rose-700"},nt={class:"grid gap-2"},lt={class:"flex items-center gap-2 text-xs font-semibold uppercase tracking-[0.15em] text-slate-500"},at=["step","max"],it={key:0,class:"text-xs text-rose-700"},ut={class:"grid gap-2"},ot={class:"flex items-center gap-2 text-xs font-semibold uppercase tracking-[0.15em] text-slate-500"},rt=["step","max"],dt={key:0,class:"text-xs text-rose-700"},pt={class:"space-y-4"},mt={class:"grid gap-4 md:grid-cols-2"},vt={class:"grid gap-2"},gt={class:"flex items-center gap-2 text-xs font-semibold uppercase tracking-[0.15em] text-slate-500"},xt=["step","max"],bt={key:0,class:"text-xs text-rose-700"},_t={class:"grid gap-2"},ct={key:0,class:"text-xs text-rose-700"},ft={class:"flex flex-wrap items-center justify-end gap-3"},yt=["disabled"],Mt={__name:"VenueSettings",props:{appName:{type:String,default:"Laravel"},venue:{type:Object,default:null},settings:{type:Object,default:()=>({})},paymentOrderOptions:{type:Array,default:()=>[]},navigation:{type:Object,default:()=>({title:"Площадки",data:[]})},activeHref:{type:String,default:""},activeTypeSlug:{type:String,default:""},breadcrumbs:{type:Array,default:()=>[]}},setup(w){const u=w,T=l(()=>u.navigation?.data??u.navigation?.items??[]),A=l(()=>(T.value?.length??0)>0),H=ve(),h=l(()=>H.props?.flash?.notice??""),C=r(""),Q=l(()=>h.value||C.value),a=l(()=>H.props?.errors??{}),X=l(()=>!a.value||!Object.keys(a.value).length?"":"Не удалось сохранить изменения. Проверьте значения."),y=r(!1),P=r(1),E=u.settings?.rental_duration_minutes??60;E%60===0?(y.value=!1,P.value=E/60):(y.value=!0,P.value=E);const Y=l(()=>y.value?1440:24),Z=l(()=>y.value?1:.25);l(()=>{const n=Number(P.value);return Number.isFinite(n)?(y.value?n:n*60)>=60:!1});const g=r(!1),N=r(1),$=u.settings?.payment_wait_minutes??60;$===0?(g.value=!1,N.value=0):$%60===0?(g.value=!1,N.value=$/60):(g.value=!0,N.value=$);const ee=l(()=>g.value?10080:168),te=l(()=>g.value?1:.25);l(()=>{const n=Number(N.value);return Number.isFinite(n)?(g.value?n:n*60)>=60:!1});const x=r(!1),V=r(1),O=u.settings?.pending_review_minutes??120;O===0?(x.value=!1,V.value=0):O%60===0?(x.value=!1,V.value=O/60):(x.value=!0,V.value=O);const se=l(()=>x.value?10080:168),ne=l(()=>x.value?1:.25);l(()=>{const n=Number(V.value);return Number.isFinite(n)?(x.value?n:n*60)>=60:!1});const b=r(!1),S=r(1),L=u.settings?.pending_before_start_minutes??120;L===0?(b.value=!1,S.value=0):L%60===0?(b.value=!1,S.value=L/60):(b.value=!0,S.value=L);const le=l(()=>b.value?10080:168),ae=l(()=>b.value?1:.25);l(()=>{const n=Number(S.value);return Number.isFinite(n)?(b.value?n:n*60)>=60:!1});const _=r(!1),M=r(1),j=u.settings?.pending_warning_minutes??30;j===0?(_.value=!1,M.value=0):j%60===0?(_.value=!1,M.value=j/60):(_.value=!0,M.value=j);const ie=l(()=>_.value?10080:168),ue=l(()=>_.value?1:.25);l(()=>{const n=Number(M.value);return Number.isFinite(n)?(_.value?n:n*60)>=60:!1});const c=r(!1),F=r(1),D=u.settings?.booking_lead_time_minutes??15;D===0?(c.value=!1,F.value=0):D%60===0?(c.value=!1,F.value=D/60):(c.value=!0,F.value=D);const oe=l(()=>c.value?1440:24),re=l(()=>c.value?1:.25);l(()=>{const n=Number(F.value);return Number.isFinite(n)?(c.value?n:n*60)>=60:!1});const f=r(!1),U=r(1),I=u.settings?.booking_min_interval_minutes??30;I===0?(f.value=!1,U.value=0):I%60===0?(f.value=!1,U.value=I/60):(f.value=!0,U.value=I);const de=l(()=>f.value?1440:24),pe=l(()=>f.value?1:.25);l(()=>{const n=Number(U.value);return Number.isFinite(n)?(f.value?n:n*60)>=60:!1});const i=ge({booking_lead_time_minutes:u.settings?.booking_lead_time_minutes??15,booking_min_interval_minutes:u.settings?.booking_min_interval_minutes??30,rental_duration_minutes:u.settings?.rental_duration_minutes??60,rental_price_rub:u.settings?.rental_price_rub??0,payment_order_id:u.settings?.payment_order_id??"",booking_mode:u.settings?.booking_mode??"instant",payment_wait_minutes:u.settings?.payment_wait_minutes??60,pending_review_minutes:u.settings?.pending_review_minutes??120,pending_before_start_minutes:u.settings?.pending_before_start_minutes??120,pending_warning_minutes:u.settings?.pending_warning_minutes??30,booking_lead_time_is_minutes:!0,booking_min_interval_is_minutes:!0,rental_duration_is_minutes:!0,payment_wait_is_minutes:!0,pending_review_is_minutes:!0,pending_before_start_is_minutes:!0,pending_warning_is_minutes:!0}),me=()=>{C.value="";const n=Number(F.value);i.booking_lead_time_minutes=Number.isFinite(n)?n:null,i.booking_lead_time_is_minutes=c.value;const e=Number(U.value);i.booking_min_interval_minutes=Number.isFinite(e)?e:null,i.booking_min_interval_is_minutes=f.value;const s=Number(P.value);i.rental_duration_minutes=Number.isFinite(s)?s:null,i.rental_duration_is_minutes=y.value;const q=Number(N.value);i.payment_wait_minutes=Number.isFinite(q)?q:null,i.payment_wait_is_minutes=g.value;const z=Number(V.value);i.pending_review_minutes=Number.isFinite(z)?z:null,i.pending_review_is_minutes=x.value;const G=Number(S.value);i.pending_before_start_minutes=Number.isFinite(G)?G:null,i.pending_before_start_is_minutes=b.value;const J=Number(M.value);i.pending_warning_minutes=Number.isFinite(J)?J:null,i.pending_warning_is_minutes=_.value,i.patch(`/venues/${u.activeTypeSlug}/${u.venue?.alias}/settings`,{preserveScroll:!0,onSuccess:()=>{C.value=h.value||"Настройки сохранены."}})};return(n,e)=>(d(),p("div",Se,[e[49]||(e[49]=t("div",{class:"pointer-events-none absolute -left-28 top-12 h-72 w-72 rounded-full bg-emerald-200/70 blur-3xl"},null,-1)),e[50]||(e[50]=t("div",{class:"pointer-events-none absolute -right-24 -top-24 h-80 w-80 rounded-full bg-amber-200/70 blur-3xl"},null,-1)),R(Ve,{success:Q.value,error:X.value},null,8,["success","error"]),t("div",Me,[R(ke,{"app-name":w.appName,"is-authenticated":!!n.$page.props.auth?.user,"login-label":n.$page.props.auth?.user?.login},null,8,["app-name","is-authenticated","login-label"]),t("main",{class:xe(["grid gap-6",{"lg:grid-cols-[240px_1fr]":A.value}])},[A.value?(d(),be(Ne,{key:0,title:w.navigation.title,data:T.value,"active-href":w.activeHref},null,8,["title","data","active-href"])):m("",!0),t("div",Fe,[R(ye,{items:w.breadcrumbs},null,8,["items"]),e[48]||(e[48]=t("h1",{class:"text-3xl font-semibold text-slate-900"},"Настройки",-1)),t("div",Ue,[t("form",{class:"space-y-8",onSubmit:_e(me,["prevent"])},[t("div",Be,[e[21]||(e[21]=t("p",{class:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400"}," Бронирование ",-1)),t("div",We,[t("div",Pe,[e[18]||(e[18]=t("label",{class:"text-xs font-semibold uppercase tracking-[0.15em] text-slate-500"}," Допустимое время до начала бронирования ",-1)),t("label",$e,[o(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>c.value=s),type:"checkbox",class:"input-switch"},null,512),[[B,c.value]]),e[17]||(e[17]=t("span",null,"В минутах",-1))]),o(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>F.value=s),type:"number",min:"0",step:re.value,max:oe.value,class:"w-full rounded-2xl border border-slate-200 px-4 py-3 text-sm text-slate-800 outline-none transition focus:border-slate-400"},null,8,Oe),[[k,F.value]]),a.value.booking_lead_time_minutes?(d(),p("p",Le,v(a.value.booking_lead_time_minutes),1)):m("",!0)]),t("div",je,[e[20]||(e[20]=t("label",{class:"text-xs font-semibold uppercase tracking-[0.15em] text-slate-500"}," Минимальный интервал бронирования ",-1)),t("label",De,[o(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>f.value=s),type:"checkbox",class:"input-switch"},null,512),[[B,f.value]]),e[19]||(e[19]=t("span",null,"В минутах",-1))]),o(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>U.value=s),type:"number",min:"1",step:pe.value,max:de.value,class:"w-full rounded-2xl border border-slate-200 px-4 py-3 text-sm text-slate-800 outline-none transition focus:border-slate-400"},null,8,Ie),[[k,U.value]]),a.value.booking_min_interval_minutes?(d(),p("p",Re,v(a.value.booking_min_interval_minutes),1)):m("",!0)])]),e[22]||(e[22]=t("hr",{class:"border-slate-200/80"},null,-1))]),t("div",Ce,[e[29]||(e[29]=t("p",{class:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400"}," Оплата и режим ",-1)),t("div",Ee,[t("div",Te,[e[23]||(e[23]=t("label",{class:"text-xs font-semibold uppercase tracking-[0.15em] text-slate-500"}," Порядок оплаты ",-1)),o(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>W(i).payment_order_id=s),class:"w-full rounded-2xl border border-slate-200 px-4 py-3 text-sm text-slate-800 outline-none transition focus:border-slate-400"},[(d(!0),p(ce,null,fe(w.paymentOrderOptions,s=>(d(),p("option",{key:s.value,value:s.value},v(s.label),9,Ae))),128))],512),[[K,W(i).payment_order_id]]),a.value.payment_order_id?(d(),p("p",He,v(a.value.payment_order_id),1)):m("",!0)]),t("div",he,[e[25]||(e[25]=t("label",{class:"text-xs font-semibold uppercase tracking-[0.15em] text-slate-500"}," Режим бронирования ",-1)),o(t("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>W(i).booking_mode=s),class:"w-full rounded-2xl border border-slate-200 px-4 py-3 text-sm text-slate-800 outline-none transition focus:border-slate-400"},[...e[24]||(e[24]=[t("option",{value:"instant"},"Мгновенное подтверждение",-1),t("option",{value:"approval_required"},"Подтверждение администратора",-1)])],512),[[K,W(i).booking_mode]]),a.value.booking_mode?(d(),p("p",qe,v(a.value.booking_mode),1)):m("",!0)])]),t("div",ze,[t("div",Ge,[e[27]||(e[27]=t("label",{class:"text-xs font-semibold uppercase tracking-[0.15em] text-slate-500"}," Срок ожидания оплаты ",-1)),t("label",Je,[o(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>g.value=s),type:"checkbox",class:"input-switch"},null,512),[[B,g.value]]),e[26]||(e[26]=t("span",null,"В минутах",-1))]),o(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>N.value=s),type:"number",min:"0",step:te.value,max:ee.value,class:"h-12 w-full rounded-2xl border border-slate-200 px-4 py-3 text-sm text-slate-800 outline-none transition focus:border-slate-400"},null,8,Ke),[[k,N.value]]),e[28]||(e[28]=t("p",{class:"text-xs text-slate-500"},"0 — бессрочно.",-1)),a.value.payment_wait_minutes?(d(),p("p",Qe,v(a.value.payment_wait_minutes),1)):m("",!0)])]),e[30]||(e[30]=t("hr",{class:"border-slate-200/80"},null,-1))]),t("div",Xe,[e[40]||(e[40]=t("p",{class:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400"}," Автоотмена pending ",-1)),t("div",Ye,[t("div",Ze,[e[32]||(e[32]=t("label",{class:"text-xs font-semibold uppercase tracking-[0.15em] text-slate-500"}," Время на рассмотрение заявки ",-1)),t("label",et,[o(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>x.value=s),type:"checkbox",class:"input-switch"},null,512),[[B,x.value]]),e[31]||(e[31]=t("span",null,"В минутах",-1))]),o(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>V.value=s),type:"number",min:"0",step:ne.value,max:se.value,class:"h-12 w-full rounded-2xl border border-slate-200 px-4 py-3 text-sm text-slate-800 outline-none transition focus:border-slate-400"},null,8,tt),[[k,V.value]]),e[33]||(e[33]=t("p",{class:"text-xs text-slate-500"},"Считается только в рабочее время площадки.",-1)),a.value.pending_review_minutes?(d(),p("p",st,v(a.value.pending_review_minutes),1)):m("",!0)]),t("div",nt,[e[35]||(e[35]=t("label",{class:"text-xs font-semibold uppercase tracking-[0.15em] text-slate-500"}," Автоотмена до начала ",-1)),t("label",lt,[o(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>b.value=s),type:"checkbox",class:"input-switch"},null,512),[[B,b.value]]),e[34]||(e[34]=t("span",null,"В минутах",-1))]),o(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>S.value=s),type:"number",min:"0",step:ae.value,max:le.value,class:"h-12 w-full rounded-2xl border border-slate-200 px-4 py-3 text-sm text-slate-800 outline-none transition focus:border-slate-400"},null,8,at),[[k,S.value]]),e[36]||(e[36]=t("p",{class:"text-xs text-slate-500"},"Отсчитывается от времени начала брони.",-1)),a.value.pending_before_start_minutes?(d(),p("p",it,v(a.value.pending_before_start_minutes),1)):m("",!0)]),t("div",ut,[e[38]||(e[38]=t("label",{class:"text-xs font-semibold uppercase tracking-[0.15em] text-slate-500"}," Предупреждение автоотмены ",-1)),t("label",ot,[o(t("input",{"onUpdate:modelValue":e[12]||(e[12]=s=>_.value=s),type:"checkbox",class:"input-switch"},null,512),[[B,_.value]]),e[37]||(e[37]=t("span",null,"В минутах",-1))]),o(t("input",{"onUpdate:modelValue":e[13]||(e[13]=s=>M.value=s),type:"number",min:"0",step:ue.value,max:ie.value,class:"h-12 w-full rounded-2xl border border-slate-200 px-4 py-3 text-sm text-slate-800 outline-none transition focus:border-slate-400"},null,8,rt),[[k,M.value]]),e[39]||(e[39]=t("p",{class:"text-xs text-slate-500"},"0 — не отправлять предупреждение.",-1)),a.value.pending_warning_minutes?(d(),p("p",dt,v(a.value.pending_warning_minutes),1)):m("",!0)])]),e[41]||(e[41]=t("hr",{class:"border-slate-200/80"},null,-1))]),t("div",pt,[e[46]||(e[46]=t("p",{class:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400"}," Стоимость ",-1)),t("div",mt,[t("div",vt,[e[43]||(e[43]=t("label",{class:"text-xs font-semibold uppercase tracking-[0.15em] text-slate-500"}," Длительность аренды ",-1)),t("label",gt,[o(t("input",{"onUpdate:modelValue":e[14]||(e[14]=s=>y.value=s),type:"checkbox",class:"input-switch"},null,512),[[B,y.value]]),e[42]||(e[42]=t("span",null,"В минутах",-1))]),o(t("input",{"onUpdate:modelValue":e[15]||(e[15]=s=>P.value=s),type:"number",min:"1",step:Z.value,max:Y.value,class:"h-12 w-full rounded-2xl border border-slate-200 px-4 py-3 text-sm text-slate-800 outline-none transition focus:border-slate-400"},null,8,xt),[[k,P.value]]),a.value.rental_duration_minutes?(d(),p("p",bt,v(a.value.rental_duration_minutes),1)):m("",!0)]),t("div",_t,[e[44]||(e[44]=t("label",{class:"text-xs font-semibold uppercase tracking-[0.15em] text-slate-500"}," Стоимость аренды (руб.) ",-1)),e[45]||(e[45]=t("div",{class:"h-6"},null,-1)),o(t("input",{"onUpdate:modelValue":e[16]||(e[16]=s=>W(i).rental_price_rub=s),type:"number",min:"0",class:"h-12 w-full rounded-2xl border border-slate-200 px-4 py-3 text-sm text-slate-800 outline-none transition focus:border-slate-400"},null,512),[[k,W(i).rental_price_rub]]),a.value.rental_price_rub?(d(),p("p",ct,v(a.value.rental_price_rub),1)):m("",!0)])]),e[47]||(e[47]=t("hr",{class:"border-slate-200/80"},null,-1))]),t("div",ft,[t("button",{type:"submit",class:"rounded-full border border-slate-900 bg-slate-900 px-5 py-2 text-sm font-semibold text-white transition hover:-translate-y-0.5 hover:bg-slate-800",disabled:W(i).processing}," Сохранить ",8,yt)])],32)])])],2),R(we,{"app-name":w.appName},null,8,["app-name"])])]))}};export{Mt as default};
