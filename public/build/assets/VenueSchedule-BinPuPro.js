import{u as fe,c as m,r as $,a as E,w as ye,b as o,d as t,e as c,f as F,n as I,g as _e,t as i,F as v,i as g,C as he,l as Z,h as n,j as y,k as h,m as _,B as ke,o as a}from"./app-BG8bJDk_.js";import{_ as we}from"./Breadcrumbs-BJkTr2TQ.js";import{_ as $e,a as Se}from"./MainHeader-CSzL04-A.js";import{_ as De}from"./MainSidebar-Gh5823Zl.js";import{_ as Ce}from"./SystemNoticeStack-D6BD3byq.js";const Me={class:"relative min-h-screen overflow-hidden bg-[#f7f1e6] text-slate-900"},Ie={class:"relative mx-auto flex max-w-[1360px] flex-col gap-8 px-6 py-8"},Oe={class:"rounded-3xl border border-slate-200/80 bg-white/90 p-6 shadow-sm page-content-wrapper"},Ne={key:0,class:"mt-6"},je={class:"flex items-center justify-between gap-3"},Be={class:"text-xs uppercase tracking-[0.15em] text-slate-500"},Ee={class:"mt-4 grid gap-3"},Fe={class:"flex items-start justify-between gap-4"},We={class:"text-sm font-semibold text-slate-900"},Ve={class:"mt-2 flex flex-wrap gap-2"},Te={key:0,class:"text-xs text-slate-500"},Ue={key:0,class:"flex flex-wrap gap-2"},Ye=["onClick"],Le=["disabled","onClick"],ze=["onClick"],Ae={class:"mt-8"},He={class:"rounded-2xl border border-slate-200 bg-white p-4"},Pe={class:"flex flex-wrap items-center justify-between gap-3"},qe={class:"text-sm font-semibold text-slate-900"},Ge={class:"flex items-center gap-2"},Je={class:"mt-4 grid grid-cols-7 gap-2 text-xs text-slate-500"},Ke={class:"mt-2 grid grid-cols-7 gap-2"},Qe=["disabled","onClick"],Re={key:1,class:"absolute right-1.5 top-4 h-2 w-2 rounded-full bg-violet-500"},Xe={class:"mt-3 text-xs text-slate-500"},Ze={key:0,class:"mt-4 rounded-2xl border border-dashed border-slate-200 bg-white px-4 py-6 text-sm text-slate-500"},et={key:1,class:"mt-4 grid gap-3"},tt={class:"flex flex-wrap items-start justify-between gap-4"},st={class:"text-sm font-semibold text-slate-900"},lt={class:"mt-1 text-xs uppercase tracking-[0.15em] text-slate-500"},at={key:0,class:"mt-2 text-sm text-slate-600"},ot={key:1,class:"mt-2 flex flex-wrap gap-2"},rt={key:0,class:"text-xs text-slate-500"},nt={key:0,class:"flex flex-wrap gap-2"},dt=["onClick"],it=["disabled","onClick"],ut={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 px-4"},ct={class:"w-full max-w-lg rounded-3xl border border-slate-200 bg-white shadow-xl"},pt={class:"popup-header flex items-center justify-between border-b border-slate-200/80 px-6 py-4"},xt={class:"text-lg font-semibold text-slate-900"},bt={class:"popup-body max-h-[500px] overflow-y-auto px-6 pt-4"},mt={class:"grid gap-3"},vt={class:"mt-2 text-sm font-semibold text-slate-900"},gt={class:"grid gap-3 md:grid-cols-2"},ft={class:"flex flex-col gap-1 text-xs uppercase tracking-[0.15em] text-slate-500"},yt={class:"flex flex-col gap-1 text-xs uppercase tracking-[0.15em] text-slate-500"},_t={key:0,class:"text-xs text-rose-700"},ht={class:"popup-footer flex flex-wrap justify-end gap-3 border-t border-slate-200/80 px-6 py-4"},kt=["disabled"],wt=["disabled"],$t={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/40 px-4"},St={class:"w-full max-w-xl rounded-3xl border border-slate-200 bg-white shadow-xl"},Dt={class:"popup-body max-h-[500px] overflow-y-auto px-6 pt-4"},Ct={key:0,class:"grid gap-3"},Mt={class:"mt-2 text-sm font-semibold text-slate-900"},It={key:0},Ot={key:1},Nt={class:"mt-2 text-sm text-slate-700"},jt={key:2},Bt={key:0,class:"mt-2 flex flex-wrap gap-2"},Et={key:1,class:"mt-2 text-sm text-slate-500"},Ft={key:1,class:"grid gap-3"},Wt={class:"flex flex-col gap-1 text-xs uppercase tracking-[0.15em] text-slate-500"},Vt={key:0,class:"text-xs text-rose-700"},Tt={class:"flex items-center gap-2 text-sm text-slate-700"},Ut={class:"flex flex-col gap-1 text-xs uppercase tracking-[0.15em] text-slate-500"},Yt={key:1,class:"text-xs text-rose-700"},Lt={key:2,class:"grid gap-3"},zt={class:"grid gap-3 md:grid-cols-2"},At={class:"flex flex-col gap-1 text-xs uppercase tracking-[0.15em] text-slate-500"},Ht=["onUpdate:modelValue"],Pt={class:"flex flex-col gap-1 text-xs uppercase tracking-[0.15em] text-slate-500"},qt=["onUpdate:modelValue"],Gt=["onClick"],Jt={key:0,class:"text-xs text-rose-700"},Kt={key:3,class:"rounded-2xl border border-dashed border-slate-200 bg-white px-4 py-3 text-sm text-slate-500"},Qt={class:"popup-footer flex flex-wrap justify-end gap-3 border-t border-slate-200/80 px-6 py-4"},Rt=["disabled"],Xt=["disabled"],as={__name:"VenueSchedule",props:{appName:{type:String,default:"Laravel"},venue:{type:Object,default:null},schedule:{type:Object,default:null},weeklyIntervals:{type:Object,default:()=>({})},exceptions:{type:Array,default:()=>[]},canManage:{type:Boolean,default:!1},bookingDates:{type:Array,default:()=>[]},daysOfWeek:{type:Array,default:()=>[]},navigation:{type:Object,default:()=>({title:"Площадки",data:[]})},activeHref:{type:String,default:""},activeTypeSlug:{type:String,default:""},breadcrumbs:{type:Array,default:()=>[]}},setup(x){const b=x,Y=fe(),L=m(()=>b.navigation?.data??b.navigation?.items??[]),z=m(()=>(L.value?.length??0)>0),ee=m(()=>Y.props?.flash?.notice??""),te=m(()=>Y.props?.errors?.schedule??""),W=$(!1),O=$(!1),S=$(null),D=$(null),u=E({day_of_week:"",starts_at:"",ends_at:""}),r=E({date:"",is_closed:!1,comment:"",intervals:[{starts_at:"",ends_at:""}]}),C=$([]);m(()=>!b.canManage);const se=m(()=>!!(D.value||r.intervals.length||r.is_closed||r.comment)),M=new Date,le=`${M.getFullYear()}-${String(M.getMonth()+1).padStart(2,"0")}-${String(M.getDate()).padStart(2,"0")}`,k=$(new Date(M.getFullYear(),M.getMonth(),1)),ae=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],oe=["Пн","Вт","Ср","Чт","Пт","Сб","Вс"],re=m(()=>{const l=k.value;return`${ae[l.getMonth()]} ${l.getFullYear()}`}),A=m(()=>{const l=new Map;return(b.exceptions??[]).forEach(e=>{e?.date&&l.set(e.date,e)}),l}),H=m(()=>{const l=k.value,e=l.getFullYear(),s=l.getMonth()+1;return(b.exceptions??[]).filter(d=>{if(!d?.date)return!1;const p=d.date.split("-").map(w=>Number(w));return p[0]===e&&p[1]===s})}),V=m(()=>{const l=new Set;return(b.daysOfWeek??[]).forEach(e=>{(b.weeklyIntervals?.[e.value]||[]).length||l.add(e.value)}),l}),ne=m(()=>new Set(b.bookingDates??[])),de=m(()=>{const l=k.value,e=l.getFullYear(),s=l.getMonth(),d=new Date(e,s+1,0).getDate(),w=(new Date(e,s,1).getDay()+6)%7,U=[];for(let f=0;f<w;f+=1)U.push({date:null,label:""});for(let f=1;f<=d;f+=1){const B=`${e}-${String(s+1).padStart(2,"0")}-${String(f).padStart(2,"0")}`,X=(new Date(e,s,f).getDay()+6)%7+1;U.push({date:B,label:String(f),exception:A.value.get(B)||null,isClosedByWeek:V.value.has(X),isOpenByWeek:!V.value.has(X),isToday:B===le,hasBookings:ne.value.has(B)})}return U}),P=()=>{u.reset("day_of_week","starts_at","ends_at"),u.clearErrors(),S.value=null},T=()=>{r.reset("date","is_closed","comment","intervals"),r.clearErrors(),D.value=null,C.value=[]},q=(l=null,e=null)=>{P(),l?(S.value=l,u.day_of_week=l.day_of_week,u.starts_at=l.starts_at,u.ends_at=l.ends_at):e&&(u.day_of_week=e),W.value=!0},ie=m(()=>u.day_of_week&&b.daysOfWeek.find(e=>e.value===Number(u.day_of_week))?.label||"—"),G=(l=null)=>{T(),l&&(D.value=l,r.date=l.date,r.is_closed=l.is_closed,r.comment=l.comment||"",r.intervals=l.is_closed?[]:l.intervals.map(e=>({starts_at:e.starts_at,ends_at:e.ends_at})),C.value=l.is_closed?[]:r.intervals),O.value=!0},ue=l=>{if(!l)return;const e=A.value.get(l);if(e){G(e);return}T(),r.date=l;const s=l.split("-").map(p=>Number(p)),d=s.length===3?new Date(s[0],s[1]-1,s[2]):null;if(d){const p=(d.getDay()+6)%7+1;r.is_closed=V.value.has(p),r.is_closed||(C.value=(b.weeklyIntervals?.[p]||[]).map(w=>({starts_at:w.starts_at,ends_at:w.ends_at})))}r.intervals=[],O.value=!0},J=l=>{const e=k.value;k.value=new Date(e.getFullYear(),e.getMonth()+l,1)},K=l=>{if(!l)return;const e=l.split("-").map(s=>Number(s));e.length<2||Number.isNaN(e[0])||Number.isNaN(e[1])||(k.value=new Date(e[0],e[1]-1,1))},N=()=>{W.value=!1,P()},j=()=>{O.value=!1,T()},ce=()=>{r.intervals.push({starts_at:"",ends_at:""})},pe=l=>{r.intervals.splice(l,1)},xe=l=>{if(!l)return[];const e=l.split("-").map(p=>Number(p));if(e.length!==3)return[];const d=(new Date(e[0],e[1]-1,e[2]).getDay()+6)%7+1;return(b.weeklyIntervals?.[d]||[]).map(p=>({starts_at:p.starts_at,ends_at:p.ends_at}))};ye(()=>r.is_closed,l=>{if(l){r.intervals=[];return}if(r.intervals.length===0){const e=xe(r.date);r.intervals=e.length?e:[{starts_at:"",ends_at:""}]}});const be=()=>{const l=`/venues/${b.activeTypeSlug}/${b.venue?.alias}/schedule/intervals`;if(S.value){u.patch(`${l}/${S.value.id}`,{preserveScroll:!0,onSuccess:N});return}u.post(l,{preserveScroll:!0,onSuccess:N})},me=()=>{const l=`/venues/${b.activeTypeSlug}/${b.venue?.alias}/schedule/exceptions`;if(D.value){r.patch(`${l}/${D.value.id}`,{preserveScroll:!0,onSuccess:()=>{K(r.date),j()}});return}r.post(l,{preserveScroll:!0,onSuccess:()=>{K(r.date),j()}})},Q=E({}),R=E({}),ve=l=>{Q.delete(`/venues/${b.activeTypeSlug}/${b.venue?.alias}/schedule/intervals/${l}`,{preserveScroll:!0})},ge=l=>{R.delete(`/venues/${b.activeTypeSlug}/${b.venue?.alias}/schedule/exceptions/${l}`,{preserveScroll:!0})};return(l,e)=>(a(),o(v,null,[t("div",Me,[e[11]||(e[11]=t("div",{class:"pointer-events-none absolute -left-28 top-12 h-72 w-72 rounded-full bg-emerald-200/70 blur-3xl"},null,-1)),e[12]||(e[12]=t("div",{class:"pointer-events-none absolute -right-24 -top-24 h-80 w-80 rounded-full bg-amber-200/70 blur-3xl"},null,-1)),F(Ce,{success:ee.value,error:te.value},null,8,["success","error"]),t("div",Ie,[F($e,{"app-name":x.appName,"is-authenticated":!!l.$page.props.auth?.user,"login-label":l.$page.props.auth?.user?.login},null,8,["app-name","is-authenticated","login-label"]),t("main",{class:I(["grid gap-6",{"lg:grid-cols-[240px_1fr]":z.value}])},[z.value?(a(),_e(De,{key:0,title:x.navigation.title,data:L.value,"active-href":x.activeHref},null,8,["title","data","active-href"])):c("",!0),t("div",Oe,[F(we,{items:x.breadcrumbs},null,8,["items"]),e[10]||(e[10]=t("div",{class:"flex flex-wrap items-center justify-between gap-4"},[t("div",null,[t("h1",{class:"text-3xl font-semibold text-slate-900"},"Расписание")])],-1)),x.canManage?(a(),o("section",Ne,[t("div",je,[e[8]||(e[8]=t("h2",{class:"text-lg font-semibold text-slate-900"},"Недельное расписание",-1)),t("span",Be,i(x.schedule?.timezone||"UTC+3"),1)]),t("div",Ee,[(a(!0),o(v,null,g(x.daysOfWeek,s=>(a(),o("div",{key:s.value,class:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3"},[t("div",Fe,[t("div",null,[t("p",We,i(s.label),1),t("div",Ve,[(a(!0),o(v,null,g(x.weeklyIntervals[s.value]||[],d=>(a(),o("span",{key:d.id,class:"rounded-full border border-slate-200 bg-white px-3 py-1 text-xs text-slate-700"},i(d.starts_at)+" – "+i(d.ends_at),1))),128)),(x.weeklyIntervals[s.value]||[]).length===0?(a(),o("span",Te," Интервалы не заданы ")):c("",!0)])]),x.canManage?(a(),o("div",Ue,[(x.weeklyIntervals[s.value]||[]).length?(a(),o(v,{key:0},[(a(!0),o(v,null,g(x.weeklyIntervals[s.value],d=>(a(),o("button",{key:`edit-${d.id}`,class:"rounded-full border border-slate-200 bg-white px-3 py-1 text-xs font-semibold text-slate-700 transition hover:-translate-y-0.5",type:"button",onClick:p=>q(d)}," Редактировать "+i(d.starts_at),9,Ye))),128)),(a(!0),o(v,null,g(x.weeklyIntervals[s.value],d=>(a(),o("button",{key:`delete-${d.id}`,class:"rounded-full border border-rose-200 bg-rose-50 px-3 py-1 text-xs font-semibold text-rose-700 transition hover:-translate-y-0.5",type:"button",disabled:n(Q).processing,onClick:p=>ve(d.id)}," Удалить ",8,Le))),128))],64)):(a(),o("button",{key:1,class:"rounded-full border border-slate-200 bg-white px-3 py-1 text-xs font-semibold text-slate-700 transition hover:-translate-y-0.5",type:"button",onClick:d=>q(null,s.value)}," Добавить ",8,ze))])):c("",!0)])]))),128))])])):c("",!0),t("section",Ae,[t("div",He,[t("div",Pe,[t("div",qe,i(re.value),1),t("div",Ge,[t("button",{class:"rounded-full border border-slate-200 bg-white px-3 py-1 text-xs font-semibold text-slate-700 transition hover:-translate-y-0.5",type:"button",onClick:e[0]||(e[0]=s=>J(-1))}," Пред "),t("button",{class:"rounded-full border border-slate-200 bg-white px-3 py-1 text-xs font-semibold text-slate-700 transition hover:-translate-y-0.5",type:"button",onClick:e[1]||(e[1]=s=>J(1))}," След ")])]),t("div",Je,[(a(),o(v,null,g(oe,s=>t("div",{key:s,class:"text-center font-semibold"},i(s),1)),64))]),t("div",Ke,[(a(!0),o(v,null,g(de.value,(s,d)=>(a(),o("button",{key:`${s.date||"empty"}-${d}`,class:I(["relative h-10 rounded-xl border border-slate-100 text-sm font-semibold text-slate-700 transition",[s.date?"bg-white hover:border-slate-300":"bg-slate-50 text-slate-300",s.exception?.is_closed?"border-rose-200 bg-rose-50 text-rose-700":"",s.exception&&!s.exception?.is_closed?"border-emerald-200 bg-emerald-50 text-emerald-700":"",!s.exception&&s.isClosedByWeek?"border-slate-200 bg-slate-50 text-slate-500":"",!s.exception&&s.isOpenByWeek?"border-emerald-200 bg-emerald-50 text-emerald-700":"",s.isToday?"border-emerald-500 ring-2 ring-emerald-200":""]]),type:"button",disabled:!s.date||!s.exception&&s.isClosedByWeek&&!x.canManage,onClick:p=>ue(s.date)},[_(i(s.label)+" ",1),s.exception||s.isClosedByWeek||s.isOpenByWeek?(a(),o("span",{key:0,class:I(["absolute right-1.5 top-1.5 h-2 w-2 rounded-full",s.exception?.is_closed?"bg-rose-500":s.exception||s.isOpenByWeek?"bg-emerald-500":"bg-slate-400"])},null,2)):c("",!0),s.hasBookings?(a(),o("span",Re)):c("",!0)],10,Qe))),128))]),t("p",Xe,i(x.canManage?"Кликните по дате, чтобы добавить или отредактировать исключение.":"Кликните по дате, чтобы посмотреть подробнее."),1),e[9]||(e[9]=he('<div class="mt-3 flex flex-wrap gap-3 text-xs text-slate-600"><div class="flex items-center gap-2"><span class="h-2 w-2 rounded-full bg-emerald-500"></span> Открыто </div><div class="flex items-center gap-2"><span class="h-2 w-2 rounded-full bg-violet-500"></span> Есть бронирования </div><div class="flex items-center gap-2"><span class="h-2 w-2 rounded-full bg-slate-400"></span> Нет интервалов </div><div class="flex items-center gap-2"><span class="h-2 w-2 rounded-full bg-rose-500"></span> Закрыто </div></div>',1))]),H.value.length?(a(),o("div",et,[(a(!0),o(v,null,g(H.value,s=>(a(),o("div",{key:s.id,class:"rounded-2xl border border-slate-200 bg-white px-4 py-3"},[t("div",tt,[t("div",null,[t("p",st,i(s.date),1),t("p",lt,i(s.is_closed?"Закрыто":"Открыто"),1),s.comment?(a(),o("div",at,i(s.comment),1)):c("",!0),s.is_closed?c("",!0):(a(),o("div",ot,[(a(!0),o(v,null,g(s.intervals,d=>(a(),o("span",{key:d.id,class:"rounded-full border border-slate-200 bg-slate-50 px-3 py-1 text-xs text-slate-700"},i(d.starts_at)+" – "+i(d.ends_at),1))),128)),s.intervals.length?c("",!0):(a(),o("span",rt," Интервалы не заданы "))]))]),x.canManage?(a(),o("div",nt,[t("button",{class:"rounded-full border border-slate-200 bg-white px-3 py-1 text-xs font-semibold text-slate-700 transition hover:-translate-y-0.5",type:"button",onClick:d=>G(s)}," Редактировать ",8,dt),t("button",{class:"rounded-full border border-rose-200 bg-rose-50 px-3 py-1 text-xs font-semibold text-rose-700 transition hover:-translate-y-0.5",type:"button",disabled:n(R).processing,onClick:d=>ge(s.id)}," Удалить ",8,it)])):c("",!0)])]))),128))])):(a(),o("div",Ze," Исключений пока нет. "))])])],2),F(Se,{"app-name":x.appName},null,8,["app-name"])])]),W.value?(a(),o("div",ut,[t("div",ct,[t("form",{class:I({loading:n(u).processing}),onSubmit:Z(be,["prevent"])},[t("div",pt,[t("h2",xt,i(S.value?"Редактировать интервал":"Новый интервал"),1),t("button",{class:"rounded-full border border-slate-200 px-2.5 py-1 text-sm text-slate-500 transition hover:border-slate-300 hover:text-slate-700",type:"button","aria-label":"Закрыть",onClick:N}," x ")]),t("div",bt,[t("div",mt,[t("div",null,[e[13]||(e[13]=t("p",{class:"text-xs uppercase tracking-[0.15em] text-slate-500"},"День недели",-1)),t("p",vt,i(ie.value),1),y(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>n(u).day_of_week=s),type:"hidden"},null,512),[[h,n(u).day_of_week]])]),t("div",gt,[t("label",ft,[e[14]||(e[14]=_(" Начало ",-1)),y(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>n(u).starts_at=s),class:"rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700",type:"time"},null,512),[[h,n(u).starts_at]])]),t("label",yt,[e[15]||(e[15]=_(" Окончание ",-1)),y(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>n(u).ends_at=s),class:"rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700",type:"time"},null,512),[[h,n(u).ends_at]])])]),n(u).errors.starts_at||n(u).errors.ends_at?(a(),o("div",_t,i(n(u).errors.starts_at||n(u).errors.ends_at),1)):c("",!0)])]),t("div",ht,[t("button",{class:"rounded-full border border-slate-200 px-4 py-2 text-sm text-slate-600 transition hover:-translate-y-0.5 hover:border-slate-300",type:"button",disabled:n(u).processing,onClick:N}," Закрыть ",8,kt),t("button",{class:"rounded-full border border-slate-900 bg-slate-900 px-4 py-2 text-sm font-semibold text-white transition hover:-translate-y-0.5 hover:bg-slate-800 disabled:cursor-not-allowed disabled:border-slate-300 disabled:bg-slate-200 disabled:text-slate-500 disabled:hover:translate-y-0",type:"submit",disabled:n(u).processing}," Сохранить ",8,wt)])],34)])])):c("",!0),O.value?(a(),o("div",$t,[t("div",St,[t("form",{class:I({loading:n(r).processing}),onSubmit:Z(me,["prevent"])},[t("div",{class:"popup-header flex items-center justify-between border-b border-slate-200/80 px-6 py-4"},[e[16]||(e[16]=t("h2",{class:"text-lg font-semibold text-slate-900"}," Расписание на день ",-1)),t("button",{class:"rounded-full border border-slate-200 px-2.5 py-1 text-sm text-slate-500 transition hover:border-slate-300 hover:text-slate-700",type:"button","aria-label":"Закрыть",onClick:j}," x ")]),t("div",Dt,[x.canManage?(a(),o("div",Ft,[t("label",Wt,[e[21]||(e[21]=_(" Дата ",-1)),y(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>n(r).date=s),class:"rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700",type:"date"},null,512),[[h,n(r).date]])]),n(r).errors.date?(a(),o("div",Vt,i(n(r).errors.date),1)):c("",!0),t("label",Tt,[y(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>n(r).is_closed=s),type:"checkbox",class:"h-4 w-4 rounded border-slate-300 text-slate-900"},null,512),[[ke,n(r).is_closed]]),e[22]||(e[22]=_(" Закрыть площадку на эту дату ",-1))]),t("label",Ut,[e[23]||(e[23]=_(" Комментарий (опционально) ",-1)),y(t("textarea",{"onUpdate:modelValue":e[7]||(e[7]=s=>n(r).comment=s),class:"min-h-[80px] rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700"},null,512),[[h,n(r).comment]])]),n(r).errors.comment?(a(),o("div",Yt,i(n(r).errors.comment),1)):c("",!0),n(r).is_closed?se.value?c("",!0):(a(),o("div",Kt," Исключение не задано. ")):(a(),o("div",Lt,[t("div",{class:"flex items-center justify-between"},[e[24]||(e[24]=t("span",{class:"text-xs uppercase tracking-[0.15em] text-slate-500"},"Интервалы",-1)),t("button",{class:"rounded-full border border-slate-200 bg-white px-3 py-1 text-xs font-semibold text-slate-700",type:"button",onClick:ce}," Добавить интервал ")]),(a(!0),o(v,null,g(n(r).intervals,(s,d)=>(a(),o("div",{key:d,class:"grid gap-2 rounded-2xl border border-slate-200 bg-slate-50 p-3"},[t("div",zt,[t("label",At,[e[25]||(e[25]=_(" Начало ",-1)),y(t("input",{"onUpdate:modelValue":p=>s.starts_at=p,class:"rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700",type:"time"},null,8,Ht),[[h,s.starts_at]])]),t("label",Pt,[e[26]||(e[26]=_(" Окончание ",-1)),y(t("input",{"onUpdate:modelValue":p=>s.ends_at=p,class:"rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700",type:"time"},null,8,qt),[[h,s.ends_at]])])]),n(r).intervals.length>1?(a(),o("button",{key:0,class:"rounded-full border border-rose-200 bg-rose-50 px-3 py-1 text-xs font-semibold text-rose-700",type:"button",onClick:p=>pe(d)}," Удалить интервал ",8,Gt)):c("",!0)]))),128)),n(r).errors.intervals?(a(),o("div",Jt,i(n(r).errors.intervals),1)):c("",!0)]))])):(a(),o("div",Ct,[t("div",null,[e[17]||(e[17]=t("p",{class:"text-xs uppercase tracking-[0.15em] text-slate-500"},"Дата",-1)),t("p",Mt,i(n(r).date||"—"),1)]),n(r).is_closed?(a(),o("div",It,[...e[18]||(e[18]=[t("p",{class:"text-xs uppercase tracking-[0.15em] text-slate-500"},"Статус",-1),t("p",{class:"mt-2 text-sm font-semibold text-rose-700"}," Закрыто ",-1)])])):c("",!0),n(r).comment?(a(),o("div",Ot,[e[19]||(e[19]=t("p",{class:"text-xs uppercase tracking-[0.15em] text-slate-500"},"Комментарий",-1)),t("p",Nt,i(n(r).comment),1)])):c("",!0),n(r).is_closed?c("",!0):(a(),o("div",jt,[e[20]||(e[20]=t("p",{class:"text-xs uppercase tracking-[0.15em] text-slate-500"},"График работы",-1)),C.value.length?(a(),o("div",Bt,[(a(!0),o(v,null,g(C.value,(s,d)=>(a(),o("span",{key:d,class:"rounded-full border border-slate-200 bg-white px-3 py-1 text-xs text-slate-700"},i(s.starts_at)+" – "+i(s.ends_at),1))),128))])):(a(),o("p",Et,"График работы не задан."))]))]))]),t("div",Qt,[t("button",{class:"rounded-full border border-slate-200 px-4 py-2 text-sm text-slate-600 transition hover:-translate-y-0.5 hover:border-slate-300",type:"button",disabled:n(r).processing,onClick:j}," Закрыть ",8,Rt),x.canManage?(a(),o("button",{key:0,class:"rounded-full border border-slate-900 bg-slate-900 px-4 py-2 text-sm font-semibold text-white transition hover:-translate-y-0.5 hover:bg-slate-800 disabled:cursor-not-allowed disabled:border-slate-300 disabled:bg-slate-200 disabled:text-slate-500 disabled:hover:translate-y-0",type:"submit",disabled:n(r).processing}," Сохранить ",8,Xt)):c("",!0)])],34)])])):c("",!0)],64))}};export{as as default};
